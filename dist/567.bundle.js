"use strict";(self.webpackChunklocom=self.webpackChunklocom||[]).push([[567],{8567:(n,e,t)=>{t.r(e),t.d(e,{AttributionControl:()=>k,Circle:()=>S,CircleMarker:()=>z,FeatureGroup:()=>M,GeoJSON:()=>B,ImageOverlay:()=>N,LayerGroup:()=>T,LayersControl:()=>_,MapContainer:()=>V,Marker:()=>Z,Pane:()=>$,Polygon:()=>q,Polyline:()=>D,Popup:()=>Y,Rectangle:()=>K,SVGOverlay:()=>en,ScaleControl:()=>Q,TileLayer:()=>rn,Tooltip:()=>on,VideoOverlay:()=>un,WMSTileLayer:()=>an,ZoomControl:()=>cn,useMap:()=>l,useMapEvent:()=>i,useMapEvents:()=>s});var r=t(6540);function o(n,e){return Object.freeze({...n,...e})}const u=(0,r.createContext)(null),a=u.Provider;function c(){const n=(0,r.useContext)(u);if(null==n)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function l(){return c().map}function i(n,e){const t=l();return(0,r.useEffect)(function(){return t.on(n,e),function(){t.off(n,e)}},[t,n,e]),t}function s(n){const e=l();return(0,r.useEffect)(function(){return e.on(n),function(){e.off(n)}},[e,n]),e}var f=t(961);function p(n){function e(e,t){const{instance:o,context:u}=n(e).current;return(0,r.useImperativeHandle)(t,()=>o),null==e.children?null:r.createElement(a,{value:u},e.children)}return(0,r.forwardRef)(e)}function d(n){function e(e,t){const{instance:o}=n(e).current;return(0,r.useImperativeHandle)(t,()=>o),null}return(0,r.forwardRef)(e)}function y(n){return function(e){const t=c(),o=n(e,t),{instance:u}=o.current,a=(0,r.useRef)(e.position),{position:l}=e;return(0,r.useEffect)(function(){return u.addTo(t.map),function(){u.remove()}},[t.map,u]),(0,r.useEffect)(function(){null!=l&&l!==a.current&&(u.setPosition(l),a.current=l)},[u,l]),o}}function m(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function v(n,e){return null==e?function(e,t){const o=(0,r.useRef)();return o.current||(o.current=n(e,t)),o}:function(t,o){const u=(0,r.useRef)();u.current||(u.current=n(t,o));const a=(0,r.useRef)(t),{instance:c}=u.current;return(0,r.useEffect)(function(){a.current!==t&&(e(c,t,a.current),a.current=t)},[c,t,o]),u}}function b(n,e){const t=(0,r.useRef)(e);(0,r.useEffect)(function(){e!==t.current&&null!=n.attributionControl&&(null!=t.current&&n.attributionControl.removeAttribution(t.current),null!=e&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}function w(n,e){const t=(0,r.useRef)();(0,r.useEffect)(function(){return null!=e&&n.instance.on(e),t.current=e,function(){null!=t.current&&n.instance.off(t.current),t.current=null}},[n,e])}function C(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function h(n,e){(0,r.useEffect)(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){e.layerContainer?.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function g(n){return function(e){const t=c(),r=n(C(e,t),t);return b(t.map,e.attribution),w(r.current,e.eventHandlers),h(r.current,t),r}}function L(n){return d(y(v(function(e,t){return m(n(e),t)})))}function E(n,e){return p(g(v(n,e)))}function O(n,e){const t=function(n,e){return function(t,r){const o=c(),u=n(C(t,o),o);return b(o.map,t.attribution),w(u.current,t.eventHandlers),e(u.current,o,t,r),u}}(v(n),e);return function(n){function e(e,t){const[o,u]=(0,r.useState)(!1),{instance:a}=n(e,u).current;(0,r.useImperativeHandle)(t,()=>a),(0,r.useEffect)(function(){o&&a.update()},[a,o,e.children]);const c=a._contentNode;return c?(0,f.createPortal)(e.children,c):null}return(0,r.forwardRef)(e)}(t)}function P(n,e){return p((t=v(n,e),function(n){const e=c(),o=t(C(n,e),e);return w(o.current,n.eventHandlers),h(o.current,e),function(n,e){const t=(0,r.useRef)();(0,r.useEffect)(function(){if(e.pathOptions!==t.current){const r=e.pathOptions??{};n.instance.setStyle(r),t.current=r}},[n,e])}(o.current,n),o}));var t}function x(n,e){return d(g(v(n,e)))}var I=t(3481);const k=L(function(n){return new I.Control.Attribution(n)});function R(n,e,t){e.center!==t.center&&n.setLatLng(e.center),null!=e.radius&&e.radius!==t.radius&&n.setRadius(e.radius)}const S=P(function({center:n,children:e,...t},r){const u=new I.Circle(n,t);return m(u,o(r,{overlayContainer:u}))},R),z=P(function({center:n,children:e,...t},r){const u=new I.CircleMarker(n,t);return m(u,o(r,{overlayContainer:u}))},R),M=P(function({children:n,...e},t){const r=new I.FeatureGroup([],e);return m(r,o(t,{layerContainer:r,overlayContainer:r}))}),B=P(function({data:n,...e},t){const r=new I.GeoJSON(n,e);return m(r,o(t,{overlayContainer:r}))},function(n,e,t){e.style!==t.style&&(null==e.style?n.resetStyle():n.setStyle(e.style))});function H(n,e,t){e.bounds instanceof I.LatLngBounds&&e.bounds!==t.bounds&&n.setBounds(e.bounds),null!=e.opacity&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),null!=e.zIndex&&e.zIndex!==t.zIndex&&n.setZIndex(e.zIndex)}const N=E(function({bounds:n,url:e,...t},r){const u=new I.ImageOverlay(e,n,t);return m(u,o(r,{overlayContainer:u}))},function(n,e,t){if(H(n,e,t),e.bounds!==t.bounds){const t=e.bounds instanceof I.LatLngBounds?e.bounds:new I.LatLngBounds(e.bounds);n.setBounds(t)}e.url!==t.url&&n.setUrl(e.url)}),T=E(function({children:n,...e},t){const r=new I.LayerGroup([],e);return m(r,o(t,{layerContainer:r}))}),_=p(y(v(function({children:n,...e},t){const r=new I.Control.Layers(void 0,void 0,e);return m(r,o(t,{layersControl:r}))},function(n,e,t){e.collapsed!==t.collapsed&&(!0===e.collapsed?n.collapse():n.expand())})));function G(n){return function(e){const t=c(),u=(0,r.useRef)(e),[l,i]=(0,r.useState)(null),{layersControl:s,map:f}=t,p=(0,r.useCallback)(e=>{null!=s&&(u.current.checked&&f.addLayer(e),n(s,e,u.current.name),i(e))},[s,f]),d=(0,r.useCallback)(n=>{s?.removeLayer(n),i(null)},[s]),y=(0,r.useMemo)(()=>o(t,{layerContainer:{addLayer:p,removeLayer:d}}),[t,p,d]);return(0,r.useEffect)(()=>{null!==l&&u.current!==e&&(!0!==e.checked||null!=u.current.checked&&!1!==u.current.checked?!0!==u.current.checked||null!=e.checked&&!1!==e.checked||f.removeLayer(l):f.addLayer(l),u.current=e)}),e.children?r.createElement(a,{value:y},e.children):null}}function j(){return j=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},j.apply(this,arguments)}function A({bounds:n,boundsOptions:e,center:t,children:o,className:u,id:c,placeholder:l,style:i,whenReady:s,zoom:f,...p},d){const[y]=(0,r.useState)({className:u,id:c,style:i}),[m,v]=(0,r.useState)(null);(0,r.useImperativeHandle)(d,()=>m?.map??null,[m]);const b=(0,r.useCallback)(r=>{if(null!==r&&null===m){const o=new I.Map(r,p);null!=t&&null!=f?o.setView(t,f):null!=n&&o.fitBounds(n,e),null!=s&&o.whenReady(s),v(function(n){return Object.freeze({__version:1,map:n})}(o))}},[]);(0,r.useEffect)(()=>()=>{m?.map.remove()},[m]);const w=m?r.createElement(a,{value:m},o):l??null;return r.createElement("div",j({},y,{ref:b}),w)}_.BaseLayer=G(function(n,e,t){n.addBaseLayer(e,t)}),_.Overlay=G(function(n,e,t){n.addOverlay(e,t)});const V=(0,r.forwardRef)(A),Z=E(function({position:n,...e},t){const r=new I.Marker(n,e);return m(r,o(t,{overlayContainer:r}))},function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),null!=e.icon&&e.icon!==t.icon&&n.setIcon(e.icon),null!=e.zIndexOffset&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),null!=e.opacity&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),null!=n.dragging&&e.draggable!==t.draggable&&(!0===e.draggable?n.dragging.enable():n.dragging.disable())});function U(n,e){(function(n){return n.split(" ").filter(Boolean)})(e).forEach(e=>{I.DomUtil.addClass(n,e)})}const F=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function J(n,e){const{[e]:t,...r}=n;return r}function W(n,e){const[t]=(0,r.useState)(n.name),[o,u]=(0,r.useState)(null);(0,r.useImperativeHandle)(e,()=>o,[o]);const l=c(),i=(0,r.useMemo)(()=>({...l,pane:t}),[l]);return(0,r.useEffect)(()=>(u(function(n,e,t){if(-1!==F.indexOf(n))throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${n}`);if(null!=t.map.getPane(n))throw new Error(`A pane with this name already exists: ${n}`);const r=e.pane??t.pane,o=r?t.map.getPane(r):void 0,u=t.map.createPane(n,o);return null!=e.className&&U(u,e.className),null!=e.style&&Object.keys(e.style).forEach(n=>{u.style[n]=e.style[n]}),u}(t,n,l)),function(){const n=l.map.getPane(t);n?.remove?.(),null!=l.map._panes&&(l.map._panes=J(l.map._panes,t),l.map._paneRenderers=J(l.map._paneRenderers,t))}),[]),null!=n.children&&null!=o?(0,f.createPortal)(r.createElement(a,{value:i},n.children),o):null}const $=(0,r.forwardRef)(W),q=P(function({positions:n,...e},t){const r=new I.Polygon(n,e);return m(r,o(t,{overlayContainer:r}))},function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)}),D=P(function({positions:n,...e},t){const r=new I.Polyline(n,e);return m(r,o(t,{overlayContainer:r}))},function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)}),Y=O(function(n,e){return m(new I.Popup(n,e.overlayContainer),e)},function(n,e,{position:t},o){(0,r.useEffect)(function(){const{instance:r}=n;function u(n){n.popup===r&&(r.update(),o(!0))}function a(n){n.popup===r&&o(!1)}return e.map.on({popupopen:u,popupclose:a}),null==e.overlayContainer?(null!=t&&r.setLatLng(t),r.openOn(e.map)):e.overlayContainer.bindPopup(r),function(){e.map.off({popupopen:u,popupclose:a}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(r)}},[n,e,o,t])}),K=P(function({bounds:n,...e},t){const r=new I.Rectangle(n,e);return m(r,o(t,{overlayContainer:r}))},function(n,e,t){e.bounds!==t.bounds&&n.setBounds(e.bounds)}),Q=L(function(n){return new I.Control.Scale(n)}),X=g(v(function(n,e){const{attributes:t,bounds:r,...o}=n,u=document.createElementNS("http://www.w3.org/2000/svg","svg");return u.setAttribute("xmlns","http://www.w3.org/2000/svg"),null!=t&&Object.keys(t).forEach(n=>{u.setAttribute(n,t[n])}),m(new I.SVGOverlay(u,r,o),e,u)},H));function nn({children:n,...e},t){const{instance:o,container:u}=X(e).current;return(0,r.useImperativeHandle)(t,()=>o),null==u||null==n?null:(0,f.createPortal)(n,u)}const en=(0,r.forwardRef)(nn);function tn(n,e,t){const{opacity:r,zIndex:o}=e;null!=r&&r!==t.opacity&&n.setOpacity(r),null!=o&&o!==t.zIndex&&n.setZIndex(o)}const rn=x(function({url:n,...e},t){return m(new I.TileLayer(n,C(e,t)),t)},function(n,e,t){tn(n,e,t);const{url:r}=e;null!=r&&r!==t.url&&n.setUrl(r)}),on=O(function(n,e){return m(new I.Tooltip(n,e.overlayContainer),e)},function(n,e,{position:t},o){(0,r.useEffect)(function(){const r=e.overlayContainer;if(null==r)return;const{instance:u}=n,a=n=>{n.tooltip===u&&(null!=t&&u.setLatLng(t),u.update(),o(!0))},c=n=>{n.tooltip===u&&o(!1)};return r.on({tooltipopen:a,tooltipclose:c}),r.bindTooltip(u),function(){r.off({tooltipopen:a,tooltipclose:c}),null!=r._map&&r.unbindTooltip()}},[n,e,o,t])}),un=E(function({bounds:n,url:e,...t},r){const u=new I.VideoOverlay(e,n,t);return!0===t.play&&u.getElement()?.play(),m(u,o(r,{overlayContainer:u}))},function(n,e,t){H(n,e,t),"string"==typeof e.url&&e.url!==t.url&&n.setUrl(e.url);const r=n.getElement();null!=r&&(!0!==e.play||t.play?e.play||!0!==t.play||r.pause():r.play())}),an=x(function({eventHandlers:n,params:e={},url:t,...r},o){return m(new I.TileLayer.WMS(t,{...e,...C(r,o)}),o)},function(n,e,t){tn(n,e,t),null!=e.params&&e.params!==t.params&&n.setParams(e.params)}),cn=L(function(n){return new I.Control.Zoom(n)})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxNQUFNYSxFQUFVLElBQUksZUFBb0JTLEVBQUtSLEVBQVE5QixHQUlyRCxPQUhxQixJQUFqQkEsRUFBUXdLLE1BQ1IzSSxFQUFRNEksY0FBY0QsT0FFbkJsTixFQUFvQnVFLEVBQVNuSCxFQUFjc0csRUFBSyxDQUNuREUsaUJBQWtCVyxJQUUxQixFQUFHLFNBQTRCQSxFQUFTekYsRUFBT3FFLEdBQzNDbUIsRUFBbUJDLEVBQVN6RixFQUFPcUUsR0FDVixpQkFBZHJFLEVBQU1rRyxLQUFvQmxHLEVBQU1rRyxNQUFRN0IsRUFBVTZCLEtBQ3pEVCxFQUFRVSxPQUFPbkcsRUFBTWtHLEtBRXpCLE1BQU1vSSxFQUFRN0ksRUFBUTRJLGFBQ1QsTUFBVEMsS0FDbUIsSUFBZnRPLEVBQU1vTyxNQUFrQi9KLEVBQVUrSixLQUUxQnBPLEVBQU1vTyxPQUEyQixJQUFuQi9KLEVBQVUrSixNQUNoQ0UsRUFBTUMsUUFGTkQsRUFBTUYsT0FLbEIsR0NyQmFJLEdBQWV6SyxFQUF5QixVQUE4Qi9CLGNBQWV5TSxFQUFJLE9BQUVDLEVBQVEsQ0FBQyxFQUFFLElBQUV4SSxLQUFTdEMsR0FBVzVFLEdBS3JJLE9BQU9rQyxFQUpPLElBQUksRUFBQXVNLFVBQVVrQixJQUFJekksRUFBSyxJQUM5QndJLEtBQ0F4TSxFQUFTMEIsRUFBUzVFLEtBRVNBLEVBQ3RDLEVBQUcsU0FBNEJvRixFQUFPcEUsRUFBT3FFLEdBQ3pDbUosR0FBZ0JwSixFQUFPcEUsRUFBT3FFLEdBQ1YsTUFBaEJyRSxFQUFNME8sUUFBa0IxTyxFQUFNME8sU0FBV3JLLEVBQVVxSyxRQUNuRHRLLEVBQU13SyxVQUFVNU8sRUFBTTBPLE9BRTlCLEdDWGFHLEdBQWNwTSxFQUF1QixTQUEyQnpDLEdBQ3pFLE9BQU8sSUFBSSxFQUFBaUUsUUFBUTZLLEtBQUs5TyxFQUM1QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvQHJlYWN0LWxlYWZsZXQvY29yZS9saWIvY29udGV4dC5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9ob29rcy5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9AcmVhY3QtbGVhZmxldC9jb3JlL2xpYi9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvQHJlYWN0LWxlYWZsZXQvY29yZS9saWIvY29udHJvbC5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9AcmVhY3QtbGVhZmxldC9jb3JlL2xpYi9lbGVtZW50LmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL0ByZWFjdC1sZWFmbGV0L2NvcmUvbGliL2F0dHJpYnV0aW9uLmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL0ByZWFjdC1sZWFmbGV0L2NvcmUvbGliL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9AcmVhY3QtbGVhZmxldC9jb3JlL2xpYi9wYW5lLmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL0ByZWFjdC1sZWFmbGV0L2NvcmUvbGliL2xheWVyLmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL0ByZWFjdC1sZWFmbGV0L2NvcmUvbGliL2dlbmVyaWMuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvQHJlYWN0LWxlYWZsZXQvY29yZS9saWIvZGl2LW92ZXJsYXkuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvQHJlYWN0LWxlYWZsZXQvY29yZS9saWIvcGF0aC5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9BdHRyaWJ1dGlvbkNvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvQHJlYWN0LWxlYWZsZXQvY29yZS9saWIvY2lyY2xlLmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWxlYWZsZXQvbGliL0NpcmNsZS5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9DaXJjbGVNYXJrZXIuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvcmVhY3QtbGVhZmxldC9saWIvRmVhdHVyZUdyb3VwLmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWxlYWZsZXQvbGliL0dlb0pTT04uanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvQHJlYWN0LWxlYWZsZXQvY29yZS9saWIvbWVkaWEtb3ZlcmxheS5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9JbWFnZU92ZXJsYXkuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvcmVhY3QtbGVhZmxldC9saWIvTGF5ZXJHcm91cC5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9MYXllcnNDb250cm9sLmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWxlYWZsZXQvbGliL01hcENvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9NYXJrZXIuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvQHJlYWN0LWxlYWZsZXQvY29yZS9saWIvZG9tLmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWxlYWZsZXQvbGliL1BhbmUuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvcmVhY3QtbGVhZmxldC9saWIvUG9seWdvbi5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9Qb2x5bGluZS5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9SZWN0YW5nbGUuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvcmVhY3QtbGVhZmxldC9saWIvU2NhbGVDb250cm9sLmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWxlYWZsZXQvbGliL1NWR092ZXJsYXkuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvQHJlYWN0LWxlYWZsZXQvY29yZS9saWIvZ3JpZC1sYXllci5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9UaWxlTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvcmVhY3QtbGVhZmxldC9saWIvVG9vbHRpcC5qcyIsIndlYnBhY2s6Ly9sb2NvbS8uL25vZGVfbW9kdWxlcy9yZWFjdC1sZWFmbGV0L2xpYi9WaWRlb092ZXJsYXkuanMiLCJ3ZWJwYWNrOi8vbG9jb20vLi9ub2RlX21vZHVsZXMvcmVhY3QtbGVhZmxldC9saWIvV01TVGlsZUxheWVyLmpzIiwid2VicGFjazovL2xvY29tLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWxlYWZsZXQvbGliL1pvb21Db250cm9sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgY29uc3QgQ09OVEVYVF9WRVJTSU9OID0gMTtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMZWFmbGV0Q29udGV4dChtYXApIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIF9fdmVyc2lvbjogQ09OVEVYVF9WRVJTSU9OLFxuICAgICAgICBtYXBcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRDb250ZXh0KHNvdXJjZSwgZXh0cmEpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIC4uLnNvdXJjZSxcbiAgICAgICAgLi4uZXh0cmFcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBMZWFmbGV0Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQobnVsbCk7XG5leHBvcnQgY29uc3QgTGVhZmxldFByb3ZpZGVyID0gTGVhZmxldENvbnRleHQuUHJvdmlkZXI7XG5leHBvcnQgZnVuY3Rpb24gdXNlTGVhZmxldENvbnRleHQoKSB7XG4gICAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoTGVhZmxldENvbnRleHQpO1xuICAgIGlmIChjb250ZXh0ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb250ZXh0IHByb3ZpZGVkOiB1c2VMZWFmbGV0Q29udGV4dCgpIGNhbiBvbmx5IGJlIHVzZWQgaW4gYSBkZXNjZW5kYW50IG9mIDxNYXBDb250YWluZXI+Jyk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0O1xufVxuIiwiaW1wb3J0IHsgdXNlTGVhZmxldENvbnRleHQgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBmdW5jdGlvbiB1c2VNYXAoKSB7XG4gICAgcmV0dXJuIHVzZUxlYWZsZXRDb250ZXh0KCkubWFwO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVzZU1hcEV2ZW50KHR5cGUsIGhhbmRsZXIpIHtcbiAgICBjb25zdCBtYXAgPSB1c2VNYXAoKTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gYWRkTWFwRXZlbnRIYW5kbGVyKCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlIGV2ZW50IHR5cGVcbiAgICAgICAgbWFwLm9uKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlTWFwRXZlbnRIYW5kbGVyKCkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBldmVudCB0eXBlXG4gICAgICAgICAgICBtYXAub2ZmKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICB9O1xuICAgIH0sIFtcbiAgICAgICAgbWFwLFxuICAgICAgICB0eXBlLFxuICAgICAgICBoYW5kbGVyXG4gICAgXSk7XG4gICAgcmV0dXJuIG1hcDtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1c2VNYXBFdmVudHMoaGFuZGxlcnMpIHtcbiAgICBjb25zdCBtYXAgPSB1c2VNYXAoKTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gYWRkTWFwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgbWFwLm9uKGhhbmRsZXJzKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlbW92ZU1hcEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgICAgICBtYXAub2ZmKGhhbmRsZXJzKTtcbiAgICAgICAgfTtcbiAgICB9LCBbXG4gICAgICAgIG1hcCxcbiAgICAgICAgaGFuZGxlcnNcbiAgICBdKTtcbiAgICByZXR1cm4gbWFwO1xufVxuIiwiaW1wb3J0IFJlYWN0LCB7IGZvcndhcmRSZWYsIHVzZUVmZmVjdCwgdXNlSW1wZXJhdGl2ZUhhbmRsZSwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjcmVhdGVQb3J0YWwgfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHsgTGVhZmxldFByb3ZpZGVyIH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb250YWluZXJDb21wb25lbnQodXNlRWxlbWVudCkge1xuICAgIGZ1bmN0aW9uIENvbnRhaW5lckNvbXBvbmVudChwcm9wcywgZm9yd2FyZGVkUmVmKSB7XG4gICAgICAgIGNvbnN0IHsgaW5zdGFuY2UgLCBjb250ZXh0ICB9ID0gdXNlRWxlbWVudChwcm9wcykuY3VycmVudDtcbiAgICAgICAgdXNlSW1wZXJhdGl2ZUhhbmRsZShmb3J3YXJkZWRSZWYsICgpPT5pbnN0YW5jZSk7XG4gICAgICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbiA9PSBudWxsID8gbnVsbCA6IC8qI19fUFVSRV9fKi8gUmVhY3QuY3JlYXRlRWxlbWVudChMZWFmbGV0UHJvdmlkZXIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBjb250ZXh0XG4gICAgICAgIH0sIHByb3BzLmNoaWxkcmVuKTtcbiAgICB9XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi8gZm9yd2FyZFJlZihDb250YWluZXJDb21wb25lbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURpdk92ZXJsYXlDb21wb25lbnQodXNlRWxlbWVudCkge1xuICAgIGZ1bmN0aW9uIE92ZXJsYXlDb21wb25lbnQocHJvcHMsIGZvcndhcmRlZFJlZikge1xuICAgICAgICBjb25zdCBbaXNPcGVuLCBzZXRPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICAgICAgY29uc3QgeyBpbnN0YW5jZSAgfSA9IHVzZUVsZW1lbnQocHJvcHMsIHNldE9wZW4pLmN1cnJlbnQ7XG4gICAgICAgIHVzZUltcGVyYXRpdmVIYW5kbGUoZm9yd2FyZGVkUmVmLCAoKT0+aW5zdGFuY2UpO1xuICAgICAgICB1c2VFZmZlY3QoZnVuY3Rpb24gdXBkYXRlT3ZlcmxheSgpIHtcbiAgICAgICAgICAgIGlmIChpc09wZW4pIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgW1xuICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICBpc09wZW4sXG4gICAgICAgICAgICBwcm9wcy5jaGlsZHJlblxuICAgICAgICBdKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBfY29udGVudE5vZGUgbWlzc2luZyBpbiB0eXBlIGRlZmluaXRpb25cbiAgICAgICAgY29uc3QgY29udGVudE5vZGUgPSBpbnN0YW5jZS5fY29udGVudE5vZGU7XG4gICAgICAgIHJldHVybiBjb250ZW50Tm9kZSA/IC8qI19fUFVSRV9fKi8gY3JlYXRlUG9ydGFsKHByb3BzLmNoaWxkcmVuLCBjb250ZW50Tm9kZSkgOiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gLyojX19QVVJFX18qLyBmb3J3YXJkUmVmKE92ZXJsYXlDb21wb25lbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUxlYWZDb21wb25lbnQodXNlRWxlbWVudCkge1xuICAgIGZ1bmN0aW9uIExlYWZDb21wb25lbnQocHJvcHMsIGZvcndhcmRlZFJlZikge1xuICAgICAgICBjb25zdCB7IGluc3RhbmNlICB9ID0gdXNlRWxlbWVudChwcm9wcykuY3VycmVudDtcbiAgICAgICAgdXNlSW1wZXJhdGl2ZUhhbmRsZShmb3J3YXJkZWRSZWYsICgpPT5pbnN0YW5jZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gLyojX19QVVJFX18qLyBmb3J3YXJkUmVmKExlYWZDb21wb25lbnQpO1xufVxuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VMZWFmbGV0Q29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29udHJvbEhvb2sodXNlRWxlbWVudCkge1xuICAgIHJldHVybiBmdW5jdGlvbiB1c2VMZWFmbGV0Q29udHJvbChwcm9wcykge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdXNlTGVhZmxldENvbnRleHQoKTtcbiAgICAgICAgY29uc3QgZWxlbWVudFJlZiA9IHVzZUVsZW1lbnQocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBjb25zdCB7IGluc3RhbmNlICB9ID0gZWxlbWVudFJlZi5jdXJyZW50O1xuICAgICAgICBjb25zdCBwb3NpdGlvblJlZiA9IHVzZVJlZihwcm9wcy5wb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IHsgcG9zaXRpb24gIH0gPSBwcm9wcztcbiAgICAgICAgdXNlRWZmZWN0KGZ1bmN0aW9uIGFkZENvbnRyb2woKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5hZGRUbyhjb250ZXh0Lm1hcCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlQ29udHJvbCgpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sIFtcbiAgICAgICAgICAgIGNvbnRleHQubWFwLFxuICAgICAgICAgICAgaW5zdGFuY2VcbiAgICAgICAgXSk7XG4gICAgICAgIHVzZUVmZmVjdChmdW5jdGlvbiB1cGRhdGVDb250cm9sKCkge1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uICE9IG51bGwgJiYgcG9zaXRpb24gIT09IHBvc2l0aW9uUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5zZXRQb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25SZWYuY3VycmVudCA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXG4gICAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAgIHBvc2l0aW9uXG4gICAgICAgIF0pO1xuICAgICAgICByZXR1cm4gZWxlbWVudFJlZjtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudE9iamVjdChpbnN0YW5jZSwgY29udGV4dCwgY29udGFpbmVyKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgY29udGFpbmVyXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudEhvb2soY3JlYXRlRWxlbWVudCwgdXBkYXRlRWxlbWVudCkge1xuICAgIGlmICh1cGRhdGVFbGVtZW50ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVzZUltbXV0YWJsZUxlYWZsZXRFbGVtZW50KHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50UmVmID0gdXNlUmVmKCk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnRSZWYuY3VycmVudCkgZWxlbWVudFJlZi5jdXJyZW50ID0gY3JlYXRlRWxlbWVudChwcm9wcywgY29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudFJlZjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVzZU11dGFibGVMZWFmbGV0RWxlbWVudChwcm9wcywgY29udGV4dCkge1xuICAgICAgICBjb25zdCBlbGVtZW50UmVmID0gdXNlUmVmKCk7XG4gICAgICAgIGlmICghZWxlbWVudFJlZi5jdXJyZW50KSBlbGVtZW50UmVmLmN1cnJlbnQgPSBjcmVhdGVFbGVtZW50KHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgY29uc3QgcHJvcHNSZWYgPSB1c2VSZWYocHJvcHMpO1xuICAgICAgICBjb25zdCB7IGluc3RhbmNlICB9ID0gZWxlbWVudFJlZi5jdXJyZW50O1xuICAgICAgICB1c2VFZmZlY3QoZnVuY3Rpb24gdXBkYXRlRWxlbWVudFByb3BzKCkge1xuICAgICAgICAgICAgaWYgKHByb3BzUmVmLmN1cnJlbnQgIT09IHByb3BzKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRWxlbWVudChpbnN0YW5jZSwgcHJvcHMsIHByb3BzUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIHByb3BzUmVmLmN1cnJlbnQgPSBwcm9wcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgW1xuICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICAgIGNvbnRleHRcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50UmVmO1xuICAgIH07XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBmdW5jdGlvbiB1c2VBdHRyaWJ1dGlvbihtYXAsIGF0dHJpYnV0aW9uKSB7XG4gICAgY29uc3QgYXR0cmlidXRpb25SZWYgPSB1c2VSZWYoYXR0cmlidXRpb24pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGlvbigpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0aW9uICE9PSBhdHRyaWJ1dGlvblJlZi5jdXJyZW50ICYmIG1hcC5hdHRyaWJ1dGlvbkNvbnRyb2wgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0aW9uUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG1hcC5hdHRyaWJ1dGlvbkNvbnRyb2wucmVtb3ZlQXR0cmlidXRpb24oYXR0cmlidXRpb25SZWYuY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG1hcC5hdHRyaWJ1dGlvbkNvbnRyb2wuYWRkQXR0cmlidXRpb24oYXR0cmlidXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF0dHJpYnV0aW9uUmVmLmN1cnJlbnQgPSBhdHRyaWJ1dGlvbjtcbiAgICB9LCBbXG4gICAgICAgIG1hcCxcbiAgICAgICAgYXR0cmlidXRpb25cbiAgICBdKTtcbn1cbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUV2ZW50SGFuZGxlcnMoZWxlbWVudCwgZXZlbnRIYW5kbGVycykge1xuICAgIGNvbnN0IGV2ZW50SGFuZGxlcnNSZWYgPSB1c2VSZWYoKTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gYWRkRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgaWYgKGV2ZW50SGFuZGxlcnMgIT0gbnVsbCkge1xuICAgICAgICAgICAgZWxlbWVudC5pbnN0YW5jZS5vbihldmVudEhhbmRsZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBldmVudEhhbmRsZXJzUmVmLmN1cnJlbnQgPSBldmVudEhhbmRsZXJzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgICAgIGlmIChldmVudEhhbmRsZXJzUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5zdGFuY2Uub2ZmKGV2ZW50SGFuZGxlcnNSZWYuY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudEhhbmRsZXJzUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB9O1xuICAgIH0sIFtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgZXZlbnRIYW5kbGVyc1xuICAgIF0pO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIHdpdGhQYW5lKHByb3BzLCBjb250ZXh0KSB7XG4gICAgY29uc3QgcGFuZSA9IHByb3BzLnBhbmUgPz8gY29udGV4dC5wYW5lO1xuICAgIHJldHVybiBwYW5lID8ge1xuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgcGFuZVxuICAgIH0gOiBwcm9wcztcbn1cbiIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUF0dHJpYnV0aW9uIH0gZnJvbSAnLi9hdHRyaWJ1dGlvbi5qcyc7XG5pbXBvcnQgeyB1c2VMZWFmbGV0Q29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5pbXBvcnQgeyB1c2VFdmVudEhhbmRsZXJzIH0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgd2l0aFBhbmUgfSBmcm9tICcuL3BhbmUuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUxheWVyTGlmZWN5Y2xlKGVsZW1lbnQsIGNvbnRleHQpIHtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gYWRkTGF5ZXIoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRleHQubGF5ZXJDb250YWluZXIgPz8gY29udGV4dC5tYXA7XG4gICAgICAgIGNvbnRhaW5lci5hZGRMYXllcihlbGVtZW50Lmluc3RhbmNlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlbW92ZUxheWVyKCkge1xuICAgICAgICAgICAgY29udGV4dC5sYXllckNvbnRhaW5lcj8ucmVtb3ZlTGF5ZXIoZWxlbWVudC5pbnN0YW5jZSk7XG4gICAgICAgICAgICBjb250ZXh0Lm1hcC5yZW1vdmVMYXllcihlbGVtZW50Lmluc3RhbmNlKTtcbiAgICAgICAgfTtcbiAgICB9LCBbXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGVsZW1lbnRcbiAgICBdKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMYXllckhvb2sodXNlRWxlbWVudCkge1xuICAgIHJldHVybiBmdW5jdGlvbiB1c2VMYXllcihwcm9wcykge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdXNlTGVhZmxldENvbnRleHQoKTtcbiAgICAgICAgY29uc3QgZWxlbWVudFJlZiA9IHVzZUVsZW1lbnQod2l0aFBhbmUocHJvcHMsIGNvbnRleHQpLCBjb250ZXh0KTtcbiAgICAgICAgdXNlQXR0cmlidXRpb24oY29udGV4dC5tYXAsIHByb3BzLmF0dHJpYnV0aW9uKTtcbiAgICAgICAgdXNlRXZlbnRIYW5kbGVycyhlbGVtZW50UmVmLmN1cnJlbnQsIHByb3BzLmV2ZW50SGFuZGxlcnMpO1xuICAgICAgICB1c2VMYXllckxpZmVjeWNsZShlbGVtZW50UmVmLmN1cnJlbnQsIGNvbnRleHQpO1xuICAgICAgICByZXR1cm4gZWxlbWVudFJlZjtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgY3JlYXRlQ29udGFpbmVyQ29tcG9uZW50LCBjcmVhdGVEaXZPdmVybGF5Q29tcG9uZW50LCBjcmVhdGVMZWFmQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ29udHJvbEhvb2sgfSBmcm9tICcuL2NvbnRyb2wuanMnO1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudEhvb2ssIGNyZWF0ZUVsZW1lbnRPYmplY3QgfSBmcm9tICcuL2VsZW1lbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlTGF5ZXJIb29rIH0gZnJvbSAnLi9sYXllci5qcyc7XG5pbXBvcnQgeyBjcmVhdGVEaXZPdmVybGF5SG9vayB9IGZyb20gJy4vZGl2LW92ZXJsYXkuanMnO1xuaW1wb3J0IHsgY3JlYXRlUGF0aEhvb2sgfSBmcm9tICcuL3BhdGguanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbnRyb2xDb21wb25lbnQoY3JlYXRlSW5zdGFuY2UpIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50T2JqZWN0KGNyZWF0ZUluc3RhbmNlKHByb3BzKSwgY29udGV4dCk7XG4gICAgfVxuICAgIGNvbnN0IHVzZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50SG9vayhjcmVhdGVFbGVtZW50KTtcbiAgICBjb25zdCB1c2VDb250cm9sID0gY3JlYXRlQ29udHJvbEhvb2sodXNlRWxlbWVudCk7XG4gICAgcmV0dXJuIGNyZWF0ZUxlYWZDb21wb25lbnQodXNlQ29udHJvbCk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTGF5ZXJDb21wb25lbnQoY3JlYXRlRWxlbWVudCwgdXBkYXRlRWxlbWVudCkge1xuICAgIGNvbnN0IHVzZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50SG9vayhjcmVhdGVFbGVtZW50LCB1cGRhdGVFbGVtZW50KTtcbiAgICBjb25zdCB1c2VMYXllciA9IGNyZWF0ZUxheWVySG9vayh1c2VFbGVtZW50KTtcbiAgICByZXR1cm4gY3JlYXRlQ29udGFpbmVyQ29tcG9uZW50KHVzZUxheWVyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPdmVybGF5Q29tcG9uZW50KGNyZWF0ZUVsZW1lbnQsIHVzZUxpZmVjeWNsZSkge1xuICAgIGNvbnN0IHVzZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50SG9vayhjcmVhdGVFbGVtZW50KTtcbiAgICBjb25zdCB1c2VPdmVybGF5ID0gY3JlYXRlRGl2T3ZlcmxheUhvb2sodXNlRWxlbWVudCwgdXNlTGlmZWN5Y2xlKTtcbiAgICByZXR1cm4gY3JlYXRlRGl2T3ZlcmxheUNvbXBvbmVudCh1c2VPdmVybGF5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQYXRoQ29tcG9uZW50KGNyZWF0ZUVsZW1lbnQsIHVwZGF0ZUVsZW1lbnQpIHtcbiAgICBjb25zdCB1c2VFbGVtZW50ID0gY3JlYXRlRWxlbWVudEhvb2soY3JlYXRlRWxlbWVudCwgdXBkYXRlRWxlbWVudCk7XG4gICAgY29uc3QgdXNlUGF0aCA9IGNyZWF0ZVBhdGhIb29rKHVzZUVsZW1lbnQpO1xuICAgIHJldHVybiBjcmVhdGVDb250YWluZXJDb21wb25lbnQodXNlUGF0aCk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGlsZUxheWVyQ29tcG9uZW50KGNyZWF0ZUVsZW1lbnQsIHVwZGF0ZUVsZW1lbnQpIHtcbiAgICBjb25zdCB1c2VFbGVtZW50ID0gY3JlYXRlRWxlbWVudEhvb2soY3JlYXRlRWxlbWVudCwgdXBkYXRlRWxlbWVudCk7XG4gICAgY29uc3QgdXNlTGF5ZXIgPSBjcmVhdGVMYXllckhvb2sodXNlRWxlbWVudCk7XG4gICAgcmV0dXJuIGNyZWF0ZUxlYWZDb21wb25lbnQodXNlTGF5ZXIpO1xufVxuIiwiaW1wb3J0IHsgdXNlQXR0cmlidXRpb24gfSBmcm9tICcuL2F0dHJpYnV0aW9uLmpzJztcbmltcG9ydCB7IHVzZUxlYWZsZXRDb250ZXh0IH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmltcG9ydCB7IHVzZUV2ZW50SGFuZGxlcnMgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyB3aXRoUGFuZSB9IGZyb20gJy4vcGFuZS5qcyc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGl2T3ZlcmxheUhvb2sodXNlRWxlbWVudCwgdXNlTGlmZWN5Y2xlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVzZURpdk92ZXJsYXkocHJvcHMsIHNldE9wZW4pIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHVzZUxlYWZsZXRDb250ZXh0KCk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRSZWYgPSB1c2VFbGVtZW50KHdpdGhQYW5lKHByb3BzLCBjb250ZXh0KSwgY29udGV4dCk7XG4gICAgICAgIHVzZUF0dHJpYnV0aW9uKGNvbnRleHQubWFwLCBwcm9wcy5hdHRyaWJ1dGlvbik7XG4gICAgICAgIHVzZUV2ZW50SGFuZGxlcnMoZWxlbWVudFJlZi5jdXJyZW50LCBwcm9wcy5ldmVudEhhbmRsZXJzKTtcbiAgICAgICAgdXNlTGlmZWN5Y2xlKGVsZW1lbnRSZWYuY3VycmVudCwgY29udGV4dCwgcHJvcHMsIHNldE9wZW4pO1xuICAgICAgICByZXR1cm4gZWxlbWVudFJlZjtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VMZWFmbGV0Q29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5pbXBvcnQgeyB1c2VFdmVudEhhbmRsZXJzIH0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgdXNlTGF5ZXJMaWZlY3ljbGUgfSBmcm9tICcuL2xheWVyLmpzJztcbmltcG9ydCB7IHdpdGhQYW5lIH0gZnJvbSAnLi9wYW5lLmpzJztcbmV4cG9ydCBmdW5jdGlvbiB1c2VQYXRoT3B0aW9ucyhlbGVtZW50LCBwcm9wcykge1xuICAgIGNvbnN0IG9wdGlvbnNSZWYgPSB1c2VSZWYoKTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gdXBkYXRlUGF0aE9wdGlvbnMoKSB7XG4gICAgICAgIGlmIChwcm9wcy5wYXRoT3B0aW9ucyAhPT0gb3B0aW9uc1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gcHJvcHMucGF0aE9wdGlvbnMgPz8ge307XG4gICAgICAgICAgICBlbGVtZW50Lmluc3RhbmNlLnNldFN0eWxlKG9wdGlvbnMpO1xuICAgICAgICAgICAgb3B0aW9uc1JlZi5jdXJyZW50ID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgIH0sIFtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgcHJvcHNcbiAgICBdKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQYXRoSG9vayh1c2VFbGVtZW50KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVzZVBhdGgocHJvcHMpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHVzZUxlYWZsZXRDb250ZXh0KCk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRSZWYgPSB1c2VFbGVtZW50KHdpdGhQYW5lKHByb3BzLCBjb250ZXh0KSwgY29udGV4dCk7XG4gICAgICAgIHVzZUV2ZW50SGFuZGxlcnMoZWxlbWVudFJlZi5jdXJyZW50LCBwcm9wcy5ldmVudEhhbmRsZXJzKTtcbiAgICAgICAgdXNlTGF5ZXJMaWZlY3ljbGUoZWxlbWVudFJlZi5jdXJyZW50LCBjb250ZXh0KTtcbiAgICAgICAgdXNlUGF0aE9wdGlvbnMoZWxlbWVudFJlZi5jdXJyZW50LCBwcm9wcyk7XG4gICAgICAgIHJldHVybiBlbGVtZW50UmVmO1xuICAgIH07XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250cm9sQ29tcG9uZW50IH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sIH0gZnJvbSAnbGVhZmxldCc7XG5leHBvcnQgY29uc3QgQXR0cmlidXRpb25Db250cm9sID0gY3JlYXRlQ29udHJvbENvbXBvbmVudChmdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGlvbkNvbnRyb2wocHJvcHMpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2wuQXR0cmlidXRpb24ocHJvcHMpO1xufSk7XG4iLCJleHBvcnQgZnVuY3Rpb24gdXBkYXRlQ2lyY2xlKGxheWVyLCBwcm9wcywgcHJldlByb3BzKSB7XG4gICAgaWYgKHByb3BzLmNlbnRlciAhPT0gcHJldlByb3BzLmNlbnRlcikge1xuICAgICAgICBsYXllci5zZXRMYXRMbmcocHJvcHMuY2VudGVyKTtcbiAgICB9XG4gICAgaWYgKHByb3BzLnJhZGl1cyAhPSBudWxsICYmIHByb3BzLnJhZGl1cyAhPT0gcHJldlByb3BzLnJhZGl1cykge1xuICAgICAgICBsYXllci5zZXRSYWRpdXMocHJvcHMucmFkaXVzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50T2JqZWN0LCBjcmVhdGVQYXRoQ29tcG9uZW50LCBleHRlbmRDb250ZXh0LCB1cGRhdGVDaXJjbGUgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IENpcmNsZSBhcyBMZWFmbGV0Q2lyY2xlIH0gZnJvbSAnbGVhZmxldCc7XG5leHBvcnQgY29uc3QgQ2lyY2xlID0gY3JlYXRlUGF0aENvbXBvbmVudChmdW5jdGlvbiBjcmVhdGVDaXJjbGUoeyBjZW50ZXIgLCBjaGlsZHJlbjogX2MgLCAuLi5vcHRpb25zIH0sIGN0eCkge1xuICAgIGNvbnN0IGNpcmNsZSA9IG5ldyBMZWFmbGV0Q2lyY2xlKGNlbnRlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRPYmplY3QoY2lyY2xlLCBleHRlbmRDb250ZXh0KGN0eCwge1xuICAgICAgICBvdmVybGF5Q29udGFpbmVyOiBjaXJjbGVcbiAgICB9KSk7XG59LCB1cGRhdGVDaXJjbGUpO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudE9iamVjdCwgY3JlYXRlUGF0aENvbXBvbmVudCwgZXh0ZW5kQ29udGV4dCwgdXBkYXRlQ2lyY2xlIH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBDaXJjbGVNYXJrZXIgYXMgTGVhZmxldENpcmNsZU1hcmtlciB9IGZyb20gJ2xlYWZsZXQnO1xuZXhwb3J0IGNvbnN0IENpcmNsZU1hcmtlciA9IGNyZWF0ZVBhdGhDb21wb25lbnQoZnVuY3Rpb24gY3JlYXRlQ2lyY2xlTWFya2VyKHsgY2VudGVyICwgY2hpbGRyZW46IF9jICwgLi4ub3B0aW9ucyB9LCBjdHgpIHtcbiAgICBjb25zdCBtYXJrZXIgPSBuZXcgTGVhZmxldENpcmNsZU1hcmtlcihjZW50ZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiBjcmVhdGVFbGVtZW50T2JqZWN0KG1hcmtlciwgZXh0ZW5kQ29udGV4dChjdHgsIHtcbiAgICAgICAgb3ZlcmxheUNvbnRhaW5lcjogbWFya2VyXG4gICAgfSkpO1xufSwgdXBkYXRlQ2lyY2xlKTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnRPYmplY3QsIGNyZWF0ZVBhdGhDb21wb25lbnQsIGV4dGVuZENvbnRleHQgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IEZlYXR1cmVHcm91cCBhcyBMZWFmbGV0RmVhdHVyZUdyb3VwIH0gZnJvbSAnbGVhZmxldCc7XG5leHBvcnQgY29uc3QgRmVhdHVyZUdyb3VwID0gY3JlYXRlUGF0aENvbXBvbmVudChmdW5jdGlvbiBjcmVhdGVGZWF0dXJlR3JvdXAoeyBjaGlsZHJlbjogX2MgLCAuLi5vcHRpb25zIH0sIGN0eCkge1xuICAgIGNvbnN0IGdyb3VwID0gbmV3IExlYWZsZXRGZWF0dXJlR3JvdXAoW10sIG9wdGlvbnMpO1xuICAgIHJldHVybiBjcmVhdGVFbGVtZW50T2JqZWN0KGdyb3VwLCBleHRlbmRDb250ZXh0KGN0eCwge1xuICAgICAgICBsYXllckNvbnRhaW5lcjogZ3JvdXAsXG4gICAgICAgIG92ZXJsYXlDb250YWluZXI6IGdyb3VwXG4gICAgfSkpO1xufSk7XG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50T2JqZWN0LCBjcmVhdGVQYXRoQ29tcG9uZW50LCBleHRlbmRDb250ZXh0IH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBHZW9KU09OIGFzIExlYWZsZXRHZW9KU09OIH0gZnJvbSAnbGVhZmxldCc7XG5leHBvcnQgY29uc3QgR2VvSlNPTiA9IGNyZWF0ZVBhdGhDb21wb25lbnQoZnVuY3Rpb24gY3JlYXRlR2VvSlNPTih7IGRhdGEgLCAuLi5vcHRpb25zIH0sIGN0eCkge1xuICAgIGNvbnN0IGdlb0pTT04gPSBuZXcgTGVhZmxldEdlb0pTT04oZGF0YSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRPYmplY3QoZ2VvSlNPTiwgZXh0ZW5kQ29udGV4dChjdHgsIHtcbiAgICAgICAgb3ZlcmxheUNvbnRhaW5lcjogZ2VvSlNPTlxuICAgIH0pKTtcbn0sIGZ1bmN0aW9uIHVwZGF0ZUdlb0pTT04obGF5ZXIsIHByb3BzLCBwcmV2UHJvcHMpIHtcbiAgICBpZiAocHJvcHMuc3R5bGUgIT09IHByZXZQcm9wcy5zdHlsZSkge1xuICAgICAgICBpZiAocHJvcHMuc3R5bGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgbGF5ZXIucmVzZXRTdHlsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGF5ZXIuc2V0U3R5bGUocHJvcHMuc3R5bGUpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBMYXRMbmdCb3VuZHMgfSBmcm9tICdsZWFmbGV0JztcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVNZWRpYU92ZXJsYXkob3ZlcmxheSwgcHJvcHMsIHByZXZQcm9wcykge1xuICAgIGlmIChwcm9wcy5ib3VuZHMgaW5zdGFuY2VvZiBMYXRMbmdCb3VuZHMgJiYgcHJvcHMuYm91bmRzICE9PSBwcmV2UHJvcHMuYm91bmRzKSB7XG4gICAgICAgIG92ZXJsYXkuc2V0Qm91bmRzKHByb3BzLmJvdW5kcyk7XG4gICAgfVxuICAgIGlmIChwcm9wcy5vcGFjaXR5ICE9IG51bGwgJiYgcHJvcHMub3BhY2l0eSAhPT0gcHJldlByb3BzLm9wYWNpdHkpIHtcbiAgICAgICAgb3ZlcmxheS5zZXRPcGFjaXR5KHByb3BzLm9wYWNpdHkpO1xuICAgIH1cbiAgICBpZiAocHJvcHMuekluZGV4ICE9IG51bGwgJiYgcHJvcHMuekluZGV4ICE9PSBwcmV2UHJvcHMuekluZGV4KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmUgbWlzc2luZyBpbiBkZWZpbml0aW9uIGJ1dCBpbmhlcml0ZWQgZnJvbSBJbWFnZU92ZXJsYXlcbiAgICAgICAgb3ZlcmxheS5zZXRaSW5kZXgocHJvcHMuekluZGV4KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50T2JqZWN0LCBjcmVhdGVMYXllckNvbXBvbmVudCwgZXh0ZW5kQ29udGV4dCwgdXBkYXRlTWVkaWFPdmVybGF5IH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBMYXRMbmdCb3VuZHMsIEltYWdlT3ZlcmxheSBhcyBMZWFmbGV0SW1hZ2VPdmVybGF5IH0gZnJvbSAnbGVhZmxldCc7XG5leHBvcnQgY29uc3QgSW1hZ2VPdmVybGF5ID0gY3JlYXRlTGF5ZXJDb21wb25lbnQoZnVuY3Rpb24gY3JlYXRlSW1hZ2VPdmVyYWx5KHsgYm91bmRzICwgdXJsICwgLi4ub3B0aW9ucyB9LCBjdHgpIHtcbiAgICBjb25zdCBvdmVybGF5ID0gbmV3IExlYWZsZXRJbWFnZU92ZXJsYXkodXJsLCBib3VuZHMsIG9wdGlvbnMpO1xuICAgIHJldHVybiBjcmVhdGVFbGVtZW50T2JqZWN0KG92ZXJsYXksIGV4dGVuZENvbnRleHQoY3R4LCB7XG4gICAgICAgIG92ZXJsYXlDb250YWluZXI6IG92ZXJsYXlcbiAgICB9KSk7XG59LCBmdW5jdGlvbiB1cGRhdGVJbWFnZU92ZXJsYXkob3ZlcmxheSwgcHJvcHMsIHByZXZQcm9wcykge1xuICAgIHVwZGF0ZU1lZGlhT3ZlcmxheShvdmVybGF5LCBwcm9wcywgcHJldlByb3BzKTtcbiAgICBpZiAocHJvcHMuYm91bmRzICE9PSBwcmV2UHJvcHMuYm91bmRzKSB7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHByb3BzLmJvdW5kcyBpbnN0YW5jZW9mIExhdExuZ0JvdW5kcyA/IHByb3BzLmJvdW5kcyA6IG5ldyBMYXRMbmdCb3VuZHMocHJvcHMuYm91bmRzKTtcbiAgICAgICAgb3ZlcmxheS5zZXRCb3VuZHMoYm91bmRzKTtcbiAgICB9XG4gICAgaWYgKHByb3BzLnVybCAhPT0gcHJldlByb3BzLnVybCkge1xuICAgICAgICBvdmVybGF5LnNldFVybChwcm9wcy51cmwpO1xuICAgIH1cbn0pO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudE9iamVjdCwgY3JlYXRlTGF5ZXJDb21wb25lbnQsIGV4dGVuZENvbnRleHQgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IExheWVyR3JvdXAgYXMgTGVhZmxldExheWVyR3JvdXAgfSBmcm9tICdsZWFmbGV0JztcbmV4cG9ydCBjb25zdCBMYXllckdyb3VwID0gY3JlYXRlTGF5ZXJDb21wb25lbnQoZnVuY3Rpb24gY3JlYXRlTGF5ZXJHcm91cCh7IGNoaWxkcmVuOiBfYyAsIC4uLm9wdGlvbnMgfSwgY3R4KSB7XG4gICAgY29uc3QgZ3JvdXAgPSBuZXcgTGVhZmxldExheWVyR3JvdXAoW10sIG9wdGlvbnMpO1xuICAgIHJldHVybiBjcmVhdGVFbGVtZW50T2JqZWN0KGdyb3VwLCBleHRlbmRDb250ZXh0KGN0eCwge1xuICAgICAgICBsYXllckNvbnRhaW5lcjogZ3JvdXBcbiAgICB9KSk7XG59KTtcbiIsImltcG9ydCB7IExlYWZsZXRQcm92aWRlciwgY3JlYXRlQ29udGFpbmVyQ29tcG9uZW50LCBjcmVhdGVDb250cm9sSG9vaywgY3JlYXRlRWxlbWVudEhvb2ssIGNyZWF0ZUVsZW1lbnRPYmplY3QsIGV4dGVuZENvbnRleHQsIHVzZUxlYWZsZXRDb250ZXh0IH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sIH0gZnJvbSAnbGVhZmxldCc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBjb25zdCB1c2VMYXllcnNDb250cm9sRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnRIb29rKGZ1bmN0aW9uIGNyZWF0ZUxheWVyc0NvbnRyb2woeyBjaGlsZHJlbjogX2MgLCAuLi5vcHRpb25zIH0sIGN0eCkge1xuICAgIGNvbnN0IGNvbnRyb2wgPSBuZXcgQ29udHJvbC5MYXllcnModW5kZWZpbmVkLCB1bmRlZmluZWQsIG9wdGlvbnMpO1xuICAgIHJldHVybiBjcmVhdGVFbGVtZW50T2JqZWN0KGNvbnRyb2wsIGV4dGVuZENvbnRleHQoY3R4LCB7XG4gICAgICAgIGxheWVyc0NvbnRyb2w6IGNvbnRyb2xcbiAgICB9KSk7XG59LCBmdW5jdGlvbiB1cGRhdGVMYXllcnNDb250cm9sKGNvbnRyb2wsIHByb3BzLCBwcmV2UHJvcHMpIHtcbiAgICBpZiAocHJvcHMuY29sbGFwc2VkICE9PSBwcmV2UHJvcHMuY29sbGFwc2VkKSB7XG4gICAgICAgIGlmIChwcm9wcy5jb2xsYXBzZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnRyb2wuY29sbGFwc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRyb2wuZXhwYW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcbmV4cG9ydCBjb25zdCB1c2VMYXllcnNDb250cm9sID0gY3JlYXRlQ29udHJvbEhvb2sodXNlTGF5ZXJzQ29udHJvbEVsZW1lbnQpO1xuLy8gQHRzLWlnbm9yZVxuZXhwb3J0IGNvbnN0IExheWVyc0NvbnRyb2wgPSBjcmVhdGVDb250YWluZXJDb21wb25lbnQodXNlTGF5ZXJzQ29udHJvbCk7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29udHJvbGxlZExheWVyKGFkZExheWVyVG9Db250cm9sKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIENvbnRyb2xsZWRMYXllcihwcm9wcykge1xuICAgICAgICBjb25zdCBwYXJlbnRDb250ZXh0ID0gdXNlTGVhZmxldENvbnRleHQoKTtcbiAgICAgICAgY29uc3QgcHJvcHNSZWYgPSB1c2VSZWYocHJvcHMpO1xuICAgICAgICBjb25zdCBbbGF5ZXIsIHNldExheWVyXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgICAgICBjb25zdCB7IGxheWVyc0NvbnRyb2wgLCBtYXAgIH0gPSBwYXJlbnRDb250ZXh0O1xuICAgICAgICBjb25zdCBhZGRMYXllciA9IHVzZUNhbGxiYWNrKChsYXllclRvQWRkKT0+e1xuICAgICAgICAgICAgaWYgKGxheWVyc0NvbnRyb2wgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wc1JlZi5jdXJyZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwLmFkZExheWVyKGxheWVyVG9BZGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZGRMYXllclRvQ29udHJvbChsYXllcnNDb250cm9sLCBsYXllclRvQWRkLCBwcm9wc1JlZi5jdXJyZW50Lm5hbWUpO1xuICAgICAgICAgICAgICAgIHNldExheWVyKGxheWVyVG9BZGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXG4gICAgICAgICAgICBsYXllcnNDb250cm9sLFxuICAgICAgICAgICAgbWFwXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCByZW1vdmVMYXllciA9IHVzZUNhbGxiYWNrKChsYXllclRvUmVtb3ZlKT0+e1xuICAgICAgICAgICAgbGF5ZXJzQ29udHJvbD8ucmVtb3ZlTGF5ZXIobGF5ZXJUb1JlbW92ZSk7XG4gICAgICAgICAgICBzZXRMYXllcihudWxsKTtcbiAgICAgICAgfSwgW1xuICAgICAgICAgICAgbGF5ZXJzQ29udHJvbFxuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHVzZU1lbW8oKCk9PntcbiAgICAgICAgICAgIHJldHVybiBleHRlbmRDb250ZXh0KHBhcmVudENvbnRleHQsIHtcbiAgICAgICAgICAgICAgICBsYXllckNvbnRhaW5lcjoge1xuICAgICAgICAgICAgICAgICAgICBhZGRMYXllcixcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTGF5ZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgW1xuICAgICAgICAgICAgcGFyZW50Q29udGV4dCxcbiAgICAgICAgICAgIGFkZExheWVyLFxuICAgICAgICAgICAgcmVtb3ZlTGF5ZXJcbiAgICAgICAgXSk7XG4gICAgICAgIHVzZUVmZmVjdCgoKT0+e1xuICAgICAgICAgICAgaWYgKGxheWVyICE9PSBudWxsICYmIHByb3BzUmVmLmN1cnJlbnQgIT09IHByb3BzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLmNoZWNrZWQgPT09IHRydWUgJiYgKHByb3BzUmVmLmN1cnJlbnQuY2hlY2tlZCA9PSBudWxsIHx8IHByb3BzUmVmLmN1cnJlbnQuY2hlY2tlZCA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5hZGRMYXllcihsYXllcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wc1JlZi5jdXJyZW50LmNoZWNrZWQgPT09IHRydWUgJiYgKHByb3BzLmNoZWNrZWQgPT0gbnVsbCB8fCBwcm9wcy5jaGVja2VkID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvcHNSZWYuY3VycmVudCA9IHByb3BzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByb3BzLmNoaWxkcmVuID8gLyojX19QVVJFX18qLyBSZWFjdC5jcmVhdGVFbGVtZW50KExlYWZsZXRQcm92aWRlciwge1xuICAgICAgICAgICAgdmFsdWU6IGNvbnRleHRcbiAgICAgICAgfSwgcHJvcHMuY2hpbGRyZW4pIDogbnVsbDtcbiAgICB9O1xufVxuTGF5ZXJzQ29udHJvbC5CYXNlTGF5ZXIgPSBjcmVhdGVDb250cm9sbGVkTGF5ZXIoZnVuY3Rpb24gYWRkQmFzZUxheWVyKGxheWVyc0NvbnRyb2wsIGxheWVyLCBuYW1lKSB7XG4gICAgbGF5ZXJzQ29udHJvbC5hZGRCYXNlTGF5ZXIobGF5ZXIsIG5hbWUpO1xufSk7XG5MYXllcnNDb250cm9sLk92ZXJsYXkgPSBjcmVhdGVDb250cm9sbGVkTGF5ZXIoZnVuY3Rpb24gYWRkT3ZlcmxheShsYXllcnNDb250cm9sLCBsYXllciwgbmFtZSkge1xuICAgIGxheWVyc0NvbnRyb2wuYWRkT3ZlcmxheShsYXllciwgbmFtZSk7XG59KTtcbiIsImZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICAgIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgZm9yKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gc291cmNlKXtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH07XG4gICAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5pbXBvcnQgeyBMZWFmbGV0UHJvdmlkZXIsIGNyZWF0ZUxlYWZsZXRDb250ZXh0IH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBNYXAgYXMgTGVhZmxldE1hcCB9IGZyb20gJ2xlYWZsZXQnO1xuaW1wb3J0IFJlYWN0LCB7IGZvcndhcmRSZWYsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZUltcGVyYXRpdmVIYW5kbGUsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuZnVuY3Rpb24gTWFwQ29udGFpbmVyQ29tcG9uZW50KHsgYm91bmRzICwgYm91bmRzT3B0aW9ucyAsIGNlbnRlciAsIGNoaWxkcmVuICwgY2xhc3NOYW1lICwgaWQgLCBwbGFjZWhvbGRlciAsIHN0eWxlICwgd2hlblJlYWR5ICwgem9vbSAsIC4uLm9wdGlvbnMgfSwgZm9yd2FyZGVkUmVmKSB7XG4gICAgY29uc3QgW3Byb3BzXSA9IHVzZVN0YXRlKHtcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICBpZCxcbiAgICAgICAgc3R5bGVcbiAgICB9KTtcbiAgICBjb25zdCBbY29udGV4dCwgc2V0Q29udGV4dF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICB1c2VJbXBlcmF0aXZlSGFuZGxlKGZvcndhcmRlZFJlZiwgKCk9PmNvbnRleHQ/Lm1hcCA/PyBudWxsLCBbXG4gICAgICAgIGNvbnRleHRcbiAgICBdKTtcbiAgICBjb25zdCBtYXBSZWYgPSB1c2VDYWxsYmFjaygobm9kZSk9PntcbiAgICAgICAgaWYgKG5vZGUgIT09IG51bGwgJiYgY29udGV4dCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgbWFwID0gbmV3IExlYWZsZXRNYXAobm9kZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoY2VudGVyICE9IG51bGwgJiYgem9vbSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbWFwLnNldFZpZXcoY2VudGVyLCB6b29tKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYm91bmRzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtYXAuZml0Qm91bmRzKGJvdW5kcywgYm91bmRzT3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2hlblJlYWR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtYXAud2hlblJlYWR5KHdoZW5SZWFkeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRDb250ZXh0KGNyZWF0ZUxlYWZsZXRDb250ZXh0KG1hcCkpO1xuICAgICAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtdKTtcbiAgICB1c2VFZmZlY3QoKCk9PntcbiAgICAgICAgcmV0dXJuICgpPT57XG4gICAgICAgICAgICBjb250ZXh0Py5tYXAucmVtb3ZlKCk7XG4gICAgICAgIH07XG4gICAgfSwgW1xuICAgICAgICBjb250ZXh0XG4gICAgXSk7XG4gICAgY29uc3QgY29udGVudHMgPSBjb250ZXh0ID8gLyojX19QVVJFX18qLyBSZWFjdC5jcmVhdGVFbGVtZW50KExlYWZsZXRQcm92aWRlciwge1xuICAgICAgICB2YWx1ZTogY29udGV4dFxuICAgIH0sIGNoaWxkcmVuKSA6IHBsYWNlaG9sZGVyID8/IG51bGw7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi8gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICAgICAgcmVmOiBtYXBSZWZcbiAgICB9KSwgY29udGVudHMpO1xufVxuZXhwb3J0IGNvbnN0IE1hcENvbnRhaW5lciA9IC8qI19fUFVSRV9fKi8gZm9yd2FyZFJlZihNYXBDb250YWluZXJDb21wb25lbnQpO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudE9iamVjdCwgY3JlYXRlTGF5ZXJDb21wb25lbnQsIGV4dGVuZENvbnRleHQgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IE1hcmtlciBhcyBMZWFmbGV0TWFya2VyIH0gZnJvbSAnbGVhZmxldCc7XG5leHBvcnQgY29uc3QgTWFya2VyID0gY3JlYXRlTGF5ZXJDb21wb25lbnQoZnVuY3Rpb24gY3JlYXRlTWFya2VyKHsgcG9zaXRpb24gLCAuLi5vcHRpb25zIH0sIGN0eCkge1xuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBMZWFmbGV0TWFya2VyKHBvc2l0aW9uLCBvcHRpb25zKTtcbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudE9iamVjdChtYXJrZXIsIGV4dGVuZENvbnRleHQoY3R4LCB7XG4gICAgICAgIG92ZXJsYXlDb250YWluZXI6IG1hcmtlclxuICAgIH0pKTtcbn0sIGZ1bmN0aW9uIHVwZGF0ZU1hcmtlcihtYXJrZXIsIHByb3BzLCBwcmV2UHJvcHMpIHtcbiAgICBpZiAocHJvcHMucG9zaXRpb24gIT09IHByZXZQcm9wcy5wb3NpdGlvbikge1xuICAgICAgICBtYXJrZXIuc2V0TGF0TG5nKHByb3BzLnBvc2l0aW9uKTtcbiAgICB9XG4gICAgaWYgKHByb3BzLmljb24gIT0gbnVsbCAmJiBwcm9wcy5pY29uICE9PSBwcmV2UHJvcHMuaWNvbikge1xuICAgICAgICBtYXJrZXIuc2V0SWNvbihwcm9wcy5pY29uKTtcbiAgICB9XG4gICAgaWYgKHByb3BzLnpJbmRleE9mZnNldCAhPSBudWxsICYmIHByb3BzLnpJbmRleE9mZnNldCAhPT0gcHJldlByb3BzLnpJbmRleE9mZnNldCkge1xuICAgICAgICBtYXJrZXIuc2V0WkluZGV4T2Zmc2V0KHByb3BzLnpJbmRleE9mZnNldCk7XG4gICAgfVxuICAgIGlmIChwcm9wcy5vcGFjaXR5ICE9IG51bGwgJiYgcHJvcHMub3BhY2l0eSAhPT0gcHJldlByb3BzLm9wYWNpdHkpIHtcbiAgICAgICAgbWFya2VyLnNldE9wYWNpdHkocHJvcHMub3BhY2l0eSk7XG4gICAgfVxuICAgIGlmIChtYXJrZXIuZHJhZ2dpbmcgIT0gbnVsbCAmJiBwcm9wcy5kcmFnZ2FibGUgIT09IHByZXZQcm9wcy5kcmFnZ2FibGUpIHtcbiAgICAgICAgaWYgKHByb3BzLmRyYWdnYWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgbWFya2VyLmRyYWdnaW5nLmVuYWJsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWFya2VyLmRyYWdnaW5nLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIiwiaW1wb3J0IHsgRG9tVXRpbCB9IGZyb20gJ2xlYWZsZXQnO1xuZnVuY3Rpb24gc3BsaXRDbGFzc05hbWUoY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIGNsYXNzTmFtZS5zcGxpdCgnICcpLmZpbHRlcihCb29sZWFuKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGRDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgc3BsaXRDbGFzc05hbWUoY2xhc3NOYW1lKS5mb3JFYWNoKChjbHMpPT57XG4gICAgICAgIERvbVV0aWwuYWRkQ2xhc3MoZWxlbWVudCwgY2xzKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgc3BsaXRDbGFzc05hbWUoY2xhc3NOYW1lKS5mb3JFYWNoKChjbHMpPT57XG4gICAgICAgIERvbVV0aWwucmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xzKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDbGFzc05hbWUoZWxlbWVudCwgcHJldkNsYXNzTmFtZSwgbmV4dENsYXNzTmFtZSkge1xuICAgIGlmIChlbGVtZW50ICE9IG51bGwgJiYgbmV4dENsYXNzTmFtZSAhPT0gcHJldkNsYXNzTmFtZSkge1xuICAgICAgICBpZiAocHJldkNsYXNzTmFtZSAhPSBudWxsICYmIHByZXZDbGFzc05hbWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3NOYW1lKGVsZW1lbnQsIHByZXZDbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0Q2xhc3NOYW1lICE9IG51bGwgJiYgbmV4dENsYXNzTmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBhZGRDbGFzc05hbWUoZWxlbWVudCwgbmV4dENsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMZWFmbGV0UHJvdmlkZXIsIGFkZENsYXNzTmFtZSwgdXNlTGVhZmxldENvbnRleHQgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCBSZWFjdCwgeyBmb3J3YXJkUmVmLCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VJbXBlcmF0aXZlSGFuZGxlLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY3JlYXRlUG9ydGFsIH0gZnJvbSAncmVhY3QtZG9tJztcbmNvbnN0IERFRkFVTFRfUEFORVMgPSBbXG4gICAgJ21hcFBhbmUnLFxuICAgICdtYXJrZXJQYW5lJyxcbiAgICAnb3ZlcmxheVBhbmUnLFxuICAgICdwb3B1cFBhbmUnLFxuICAgICdzaGFkb3dQYW5lJyxcbiAgICAndGlsZVBhbmUnLFxuICAgICd0b29sdGlwUGFuZSdcbl07XG5mdW5jdGlvbiBvbWl0UGFuZShvYmosIHBhbmUpIHtcbiAgICBjb25zdCB7IFtwYW5lXTogX3AgLCAuLi5vdGhlcnMgfSA9IG9iajtcbiAgICByZXR1cm4gb3RoZXJzO1xufVxuZnVuY3Rpb24gY3JlYXRlUGFuZShuYW1lLCBwcm9wcywgY29udGV4dCkge1xuICAgIGlmIChERUZBVUxUX1BBTkVTLmluZGV4T2YobmFtZSkgIT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91IG11c3QgdXNlIGEgdW5pcXVlIG5hbWUgZm9yIGEgcGFuZSB0aGF0IGlzIG5vdCBhIGRlZmF1bHQgTGVhZmxldCBwYW5lOiAke25hbWV9YCk7XG4gICAgfVxuICAgIGlmIChjb250ZXh0Lm1hcC5nZXRQYW5lKG5hbWUpICE9IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIHBhbmUgd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHM6ICR7bmFtZX1gKTtcbiAgICB9XG4gICAgY29uc3QgcGFyZW50UGFuZU5hbWUgPSBwcm9wcy5wYW5lID8/IGNvbnRleHQucGFuZTtcbiAgICBjb25zdCBwYXJlbnRQYW5lID0gcGFyZW50UGFuZU5hbWUgPyBjb250ZXh0Lm1hcC5nZXRQYW5lKHBhcmVudFBhbmVOYW1lKSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBlbGVtZW50ID0gY29udGV4dC5tYXAuY3JlYXRlUGFuZShuYW1lLCBwYXJlbnRQYW5lKTtcbiAgICBpZiAocHJvcHMuY2xhc3NOYW1lICE9IG51bGwpIHtcbiAgICAgICAgYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIHByb3BzLmNsYXNzTmFtZSk7XG4gICAgfVxuICAgIGlmIChwcm9wcy5zdHlsZSAhPSBudWxsKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHByb3BzLnN0eWxlKS5mb3JFYWNoKChrZXkpPT57XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW2tleV0gPSBwcm9wcy5zdHlsZVtrZXldO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59XG5mdW5jdGlvbiBQYW5lQ29tcG9uZW50KHByb3BzLCBmb3J3YXJkZWRSZWYpIHtcbiAgICBjb25zdCBbcGFuZU5hbWVdID0gdXNlU3RhdGUocHJvcHMubmFtZSk7XG4gICAgY29uc3QgW3BhbmVFbGVtZW50LCBzZXRQYW5lRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICB1c2VJbXBlcmF0aXZlSGFuZGxlKGZvcndhcmRlZFJlZiwgKCk9PnBhbmVFbGVtZW50LCBbXG4gICAgICAgIHBhbmVFbGVtZW50XG4gICAgXSk7XG4gICAgY29uc3QgY29udGV4dCA9IHVzZUxlYWZsZXRDb250ZXh0KCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIGNvbnN0IG5ld0NvbnRleHQgPSB1c2VNZW1vKCgpPT4oe1xuICAgICAgICAgICAgLi4uY29udGV4dCxcbiAgICAgICAgICAgIHBhbmU6IHBhbmVOYW1lXG4gICAgICAgIH0pLCBbXG4gICAgICAgIGNvbnRleHRcbiAgICBdKTtcbiAgICB1c2VFZmZlY3QoKCk9PntcbiAgICAgICAgc2V0UGFuZUVsZW1lbnQoY3JlYXRlUGFuZShwYW5lTmFtZSwgcHJvcHMsIGNvbnRleHQpKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlbW92ZUNyZWF0ZWRQYW5lKCkge1xuICAgICAgICAgICAgY29uc3QgcGFuZSA9IGNvbnRleHQubWFwLmdldFBhbmUocGFuZU5hbWUpO1xuICAgICAgICAgICAgcGFuZT8ucmVtb3ZlPy4oKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgbWFwIGludGVybmFsc1xuICAgICAgICAgICAgaWYgKGNvbnRleHQubWFwLl9wYW5lcyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBtYXAgaW50ZXJuYWxzXG4gICAgICAgICAgICAgICAgY29udGV4dC5tYXAuX3BhbmVzID0gb21pdFBhbmUoY29udGV4dC5tYXAuX3BhbmVzLCBwYW5lTmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBtYXAgaW50ZXJuYWxzXG4gICAgICAgICAgICAgICAgY29udGV4dC5tYXAuX3BhbmVSZW5kZXJlcnMgPSBvbWl0UGFuZSgvLyBAdHMtaWdub3JlIG1hcCBpbnRlcm5hbHNcbiAgICAgICAgICAgICAgICBjb250ZXh0Lm1hcC5fcGFuZVJlbmRlcmVycywgcGFuZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIHByb3BzLmNoaWxkcmVuICE9IG51bGwgJiYgcGFuZUVsZW1lbnQgIT0gbnVsbCA/IC8qI19fUFVSRV9fKi8gY3JlYXRlUG9ydGFsKC8qI19fUFVSRV9fKi8gUmVhY3QuY3JlYXRlRWxlbWVudChMZWFmbGV0UHJvdmlkZXIsIHtcbiAgICAgICAgdmFsdWU6IG5ld0NvbnRleHRcbiAgICB9LCBwcm9wcy5jaGlsZHJlbiksIHBhbmVFbGVtZW50KSA6IG51bGw7XG59XG5leHBvcnQgY29uc3QgUGFuZSA9IC8qI19fUFVSRV9fKi8gZm9yd2FyZFJlZihQYW5lQ29tcG9uZW50KTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnRPYmplY3QsIGNyZWF0ZVBhdGhDb21wb25lbnQsIGV4dGVuZENvbnRleHQgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IFBvbHlnb24gYXMgTGVhZmxldFBvbHlnb24gfSBmcm9tICdsZWFmbGV0JztcbmV4cG9ydCBjb25zdCBQb2x5Z29uID0gY3JlYXRlUGF0aENvbXBvbmVudChmdW5jdGlvbiBjcmVhdGVQb2x5Z29uKHsgcG9zaXRpb25zICwgLi4ub3B0aW9ucyB9LCBjdHgpIHtcbiAgICBjb25zdCBwb2x5Z29uID0gbmV3IExlYWZsZXRQb2x5Z29uKHBvc2l0aW9ucywgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRPYmplY3QocG9seWdvbiwgZXh0ZW5kQ29udGV4dChjdHgsIHtcbiAgICAgICAgb3ZlcmxheUNvbnRhaW5lcjogcG9seWdvblxuICAgIH0pKTtcbn0sIGZ1bmN0aW9uIHVwZGF0ZVBvbHlnb24obGF5ZXIsIHByb3BzLCBwcmV2UHJvcHMpIHtcbiAgICBpZiAocHJvcHMucG9zaXRpb25zICE9PSBwcmV2UHJvcHMucG9zaXRpb25zKSB7XG4gICAgICAgIGxheWVyLnNldExhdExuZ3MocHJvcHMucG9zaXRpb25zKTtcbiAgICB9XG59KTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnRPYmplY3QsIGNyZWF0ZVBhdGhDb21wb25lbnQsIGV4dGVuZENvbnRleHQgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IFBvbHlsaW5lIGFzIExlYWZsZXRQb2x5bGluZSB9IGZyb20gJ2xlYWZsZXQnO1xuZXhwb3J0IGNvbnN0IFBvbHlsaW5lID0gY3JlYXRlUGF0aENvbXBvbmVudChmdW5jdGlvbiBjcmVhdGVQb2x5bGluZSh7IHBvc2l0aW9ucyAsIC4uLm9wdGlvbnMgfSwgY3R4KSB7XG4gICAgY29uc3QgcG9seWxpbmUgPSBuZXcgTGVhZmxldFBvbHlsaW5lKHBvc2l0aW9ucywgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRPYmplY3QocG9seWxpbmUsIGV4dGVuZENvbnRleHQoY3R4LCB7XG4gICAgICAgIG92ZXJsYXlDb250YWluZXI6IHBvbHlsaW5lXG4gICAgfSkpO1xufSwgZnVuY3Rpb24gdXBkYXRlUG9seWxpbmUobGF5ZXIsIHByb3BzLCBwcmV2UHJvcHMpIHtcbiAgICBpZiAocHJvcHMucG9zaXRpb25zICE9PSBwcmV2UHJvcHMucG9zaXRpb25zKSB7XG4gICAgICAgIGxheWVyLnNldExhdExuZ3MocHJvcHMucG9zaXRpb25zKTtcbiAgICB9XG59KTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnRPYmplY3QsIGNyZWF0ZU92ZXJsYXlDb21wb25lbnQgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IFBvcHVwIGFzIExlYWZsZXRQb3B1cCB9IGZyb20gJ2xlYWZsZXQnO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGNvbnN0IFBvcHVwID0gY3JlYXRlT3ZlcmxheUNvbXBvbmVudChmdW5jdGlvbiBjcmVhdGVQb3B1cChwcm9wcywgY29udGV4dCkge1xuICAgIGNvbnN0IHBvcHVwID0gbmV3IExlYWZsZXRQb3B1cChwcm9wcywgY29udGV4dC5vdmVybGF5Q29udGFpbmVyKTtcbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudE9iamVjdChwb3B1cCwgY29udGV4dCk7XG59LCBmdW5jdGlvbiB1c2VQb3B1cExpZmVjeWNsZShlbGVtZW50LCBjb250ZXh0LCB7IHBvc2l0aW9uICB9LCBzZXRPcGVuKSB7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uIGFkZFBvcHVwKCkge1xuICAgICAgICBjb25zdCB7IGluc3RhbmNlICB9ID0gZWxlbWVudDtcbiAgICAgICAgZnVuY3Rpb24gb25Qb3B1cE9wZW4oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5wb3B1cCA9PT0gaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICBzZXRPcGVuKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uUG9wdXBDbG9zZShldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnBvcHVwID09PSBpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQubWFwLm9uKHtcbiAgICAgICAgICAgIHBvcHVwb3Blbjogb25Qb3B1cE9wZW4sXG4gICAgICAgICAgICBwb3B1cGNsb3NlOiBvblBvcHVwQ2xvc2VcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb250ZXh0Lm92ZXJsYXlDb250YWluZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gQXR0YWNoIHRvIGEgTWFwXG4gICAgICAgICAgICBpZiAocG9zaXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLnNldExhdExuZyhwb3NpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnN0YW5jZS5vcGVuT24oY29udGV4dC5tYXApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQXR0YWNoIHRvIGNvbnRhaW5lciBjb21wb25lbnRcbiAgICAgICAgICAgIGNvbnRleHQub3ZlcmxheUNvbnRhaW5lci5iaW5kUG9wdXAoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiByZW1vdmVQb3B1cCgpIHtcbiAgICAgICAgICAgIGNvbnRleHQubWFwLm9mZih7XG4gICAgICAgICAgICAgICAgcG9wdXBvcGVuOiBvblBvcHVwT3BlbixcbiAgICAgICAgICAgICAgICBwb3B1cGNsb3NlOiBvblBvcHVwQ2xvc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGV4dC5vdmVybGF5Q29udGFpbmVyPy51bmJpbmRQb3B1cCgpO1xuICAgICAgICAgICAgY29udGV4dC5tYXAucmVtb3ZlTGF5ZXIoaW5zdGFuY2UpO1xuICAgICAgICB9O1xuICAgIH0sIFtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgc2V0T3BlbixcbiAgICAgICAgcG9zaXRpb25cbiAgICBdKTtcbn0pO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudE9iamVjdCwgY3JlYXRlUGF0aENvbXBvbmVudCwgZXh0ZW5kQ29udGV4dCB9IGZyb20gJ0ByZWFjdC1sZWFmbGV0L2NvcmUnO1xuaW1wb3J0IHsgUmVjdGFuZ2xlIGFzIExlYWZsZXRSZWN0YW5nbGUgfSBmcm9tICdsZWFmbGV0JztcbmV4cG9ydCBjb25zdCBSZWN0YW5nbGUgPSBjcmVhdGVQYXRoQ29tcG9uZW50KGZ1bmN0aW9uIGNyZWF0ZVJlY3RhbmdsZSh7IGJvdW5kcyAsIC4uLm9wdGlvbnMgfSwgY3R4KSB7XG4gICAgY29uc3QgcmVjdGFuZ2xlID0gbmV3IExlYWZsZXRSZWN0YW5nbGUoYm91bmRzLCBvcHRpb25zKTtcbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudE9iamVjdChyZWN0YW5nbGUsIGV4dGVuZENvbnRleHQoY3R4LCB7XG4gICAgICAgIG92ZXJsYXlDb250YWluZXI6IHJlY3RhbmdsZVxuICAgIH0pKTtcbn0sIGZ1bmN0aW9uIHVwZGF0ZVJlY3RhbmdsZShsYXllciwgcHJvcHMsIHByZXZQcm9wcykge1xuICAgIGlmIChwcm9wcy5ib3VuZHMgIT09IHByZXZQcm9wcy5ib3VuZHMpIHtcbiAgICAgICAgbGF5ZXIuc2V0Qm91bmRzKHByb3BzLmJvdW5kcyk7XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250cm9sQ29tcG9uZW50IH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sIH0gZnJvbSAnbGVhZmxldCc7XG5leHBvcnQgY29uc3QgU2NhbGVDb250cm9sID0gY3JlYXRlQ29udHJvbENvbXBvbmVudChmdW5jdGlvbiBjcmVhdGVTY2FsZUNvbnRyb2wocHJvcHMpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2wuU2NhbGUocHJvcHMpO1xufSk7XG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50SG9vaywgY3JlYXRlRWxlbWVudE9iamVjdCwgY3JlYXRlTGF5ZXJIb29rLCB1cGRhdGVNZWRpYU92ZXJsYXkgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IFNWR092ZXJsYXkgYXMgTGVhZmxldFNWR092ZXJsYXkgfSBmcm9tICdsZWFmbGV0JztcbmltcG9ydCB7IGZvcndhcmRSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjcmVhdGVQb3J0YWwgfSBmcm9tICdyZWFjdC1kb20nO1xuZXhwb3J0IGNvbnN0IHVzZVNWR092ZXJsYXlFbGVtZW50ID0gY3JlYXRlRWxlbWVudEhvb2soZnVuY3Rpb24gY3JlYXRlU1ZHT3ZlcmxheShwcm9wcywgY29udGV4dCkge1xuICAgIGNvbnN0IHsgYXR0cmlidXRlcyAsIGJvdW5kcyAsIC4uLm9wdGlvbnMgfSA9IHByb3BzO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG4gICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgneG1sbnMnLCAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnKTtcbiAgICBpZiAoYXR0cmlidXRlcyAhPSBudWxsKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goKG5hbWUpPT57XG4gICAgICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKG5hbWUsIGF0dHJpYnV0ZXNbbmFtZV0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmxheSA9IG5ldyBMZWFmbGV0U1ZHT3ZlcmxheShjb250YWluZXIsIGJvdW5kcywgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRPYmplY3Qob3ZlcmxheSwgY29udGV4dCwgY29udGFpbmVyKTtcbn0sIHVwZGF0ZU1lZGlhT3ZlcmxheSk7XG5leHBvcnQgY29uc3QgdXNlU1ZHT3ZlcmxheSA9IGNyZWF0ZUxheWVySG9vayh1c2VTVkdPdmVybGF5RWxlbWVudCk7XG5mdW5jdGlvbiBTVkdPdmVybGF5Q29tcG9uZW50KHsgY2hpbGRyZW4gLCAuLi5vcHRpb25zIH0sIGZvcndhcmRlZFJlZikge1xuICAgIGNvbnN0IHsgaW5zdGFuY2UgLCBjb250YWluZXIgIH0gPSB1c2VTVkdPdmVybGF5KG9wdGlvbnMpLmN1cnJlbnQ7XG4gICAgdXNlSW1wZXJhdGl2ZUhhbmRsZShmb3J3YXJkZWRSZWYsICgpPT5pbnN0YW5jZSk7XG4gICAgcmV0dXJuIGNvbnRhaW5lciA9PSBudWxsIHx8IGNoaWxkcmVuID09IG51bGwgPyBudWxsIDogLyojX19QVVJFX18qLyBjcmVhdGVQb3J0YWwoY2hpbGRyZW4sIGNvbnRhaW5lcik7XG59XG5leHBvcnQgY29uc3QgU1ZHT3ZlcmxheSA9IC8qI19fUFVSRV9fKi8gZm9yd2FyZFJlZihTVkdPdmVybGF5Q29tcG9uZW50KTtcbiIsImV4cG9ydCBmdW5jdGlvbiB1cGRhdGVHcmlkTGF5ZXIobGF5ZXIsIHByb3BzLCBwcmV2UHJvcHMpIHtcbiAgICBjb25zdCB7IG9wYWNpdHkgLCB6SW5kZXggIH0gPSBwcm9wcztcbiAgICBpZiAob3BhY2l0eSAhPSBudWxsICYmIG9wYWNpdHkgIT09IHByZXZQcm9wcy5vcGFjaXR5KSB7XG4gICAgICAgIGxheWVyLnNldE9wYWNpdHkob3BhY2l0eSk7XG4gICAgfVxuICAgIGlmICh6SW5kZXggIT0gbnVsbCAmJiB6SW5kZXggIT09IHByZXZQcm9wcy56SW5kZXgpIHtcbiAgICAgICAgbGF5ZXIuc2V0WkluZGV4KHpJbmRleCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudE9iamVjdCwgY3JlYXRlVGlsZUxheWVyQ29tcG9uZW50LCB1cGRhdGVHcmlkTGF5ZXIsIHdpdGhQYW5lIH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBUaWxlTGF5ZXIgYXMgTGVhZmxldFRpbGVMYXllciB9IGZyb20gJ2xlYWZsZXQnO1xuZXhwb3J0IGNvbnN0IFRpbGVMYXllciA9IGNyZWF0ZVRpbGVMYXllckNvbXBvbmVudChmdW5jdGlvbiBjcmVhdGVUaWxlTGF5ZXIoeyB1cmwgLCAuLi5vcHRpb25zIH0sIGNvbnRleHQpIHtcbiAgICBjb25zdCBsYXllciA9IG5ldyBMZWFmbGV0VGlsZUxheWVyKHVybCwgd2l0aFBhbmUob3B0aW9ucywgY29udGV4dCkpO1xuICAgIHJldHVybiBjcmVhdGVFbGVtZW50T2JqZWN0KGxheWVyLCBjb250ZXh0KTtcbn0sIGZ1bmN0aW9uIHVwZGF0ZVRpbGVMYXllcihsYXllciwgcHJvcHMsIHByZXZQcm9wcykge1xuICAgIHVwZGF0ZUdyaWRMYXllcihsYXllciwgcHJvcHMsIHByZXZQcm9wcyk7XG4gICAgY29uc3QgeyB1cmwgIH0gPSBwcm9wcztcbiAgICBpZiAodXJsICE9IG51bGwgJiYgdXJsICE9PSBwcmV2UHJvcHMudXJsKSB7XG4gICAgICAgIGxheWVyLnNldFVybCh1cmwpO1xuICAgIH1cbn0pO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudE9iamVjdCwgY3JlYXRlT3ZlcmxheUNvbXBvbmVudCB9IGZyb20gJ0ByZWFjdC1sZWFmbGV0L2NvcmUnO1xuaW1wb3J0IHsgVG9vbHRpcCBhcyBMZWFmbGV0VG9vbHRpcCB9IGZyb20gJ2xlYWZsZXQnO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGNvbnN0IFRvb2x0aXAgPSBjcmVhdGVPdmVybGF5Q29tcG9uZW50KGZ1bmN0aW9uIGNyZWF0ZVRvb2x0aXAocHJvcHMsIGNvbnRleHQpIHtcbiAgICBjb25zdCB0b29sdGlwID0gbmV3IExlYWZsZXRUb29sdGlwKHByb3BzLCBjb250ZXh0Lm92ZXJsYXlDb250YWluZXIpO1xuICAgIHJldHVybiBjcmVhdGVFbGVtZW50T2JqZWN0KHRvb2x0aXAsIGNvbnRleHQpO1xufSwgZnVuY3Rpb24gdXNlVG9vbHRpcExpZmVjeWNsZShlbGVtZW50LCBjb250ZXh0LCB7IHBvc2l0aW9uICB9LCBzZXRPcGVuKSB7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uIGFkZFRvb2x0aXAoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRleHQub3ZlcmxheUNvbnRhaW5lcjtcbiAgICAgICAgaWYgKGNvbnRhaW5lciA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBpbnN0YW5jZSAgfSA9IGVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IG9uVG9vbHRpcE9wZW4gPSAoZXZlbnQpPT57XG4gICAgICAgICAgICBpZiAoZXZlbnQudG9vbHRpcCA9PT0gaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5zZXRMYXRMbmcocG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICBzZXRPcGVuKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvblRvb2x0aXBDbG9zZSA9IChldmVudCk9PntcbiAgICAgICAgICAgIGlmIChldmVudC50b29sdGlwID09PSBpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb250YWluZXIub24oe1xuICAgICAgICAgICAgdG9vbHRpcG9wZW46IG9uVG9vbHRpcE9wZW4sXG4gICAgICAgICAgICB0b29sdGlwY2xvc2U6IG9uVG9vbHRpcENsb3NlXG4gICAgICAgIH0pO1xuICAgICAgICBjb250YWluZXIuYmluZFRvb2x0aXAoaW5zdGFuY2UpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlVG9vbHRpcCgpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5vZmYoe1xuICAgICAgICAgICAgICAgIHRvb2x0aXBvcGVuOiBvblRvb2x0aXBPcGVuLFxuICAgICAgICAgICAgICAgIHRvb2x0aXBjbG9zZTogb25Ub29sdGlwQ2xvc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBwcm90ZWN0ZWQgcHJvcGVydHlcbiAgICAgICAgICAgIGlmIChjb250YWluZXIuX21hcCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnVuYmluZFRvb2x0aXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbXG4gICAgICAgIGVsZW1lbnQsXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIHNldE9wZW4sXG4gICAgICAgIHBvc2l0aW9uXG4gICAgXSk7XG59KTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnRPYmplY3QsIGNyZWF0ZUxheWVyQ29tcG9uZW50LCBleHRlbmRDb250ZXh0LCB1cGRhdGVNZWRpYU92ZXJsYXkgfSBmcm9tICdAcmVhY3QtbGVhZmxldC9jb3JlJztcbmltcG9ydCB7IFZpZGVvT3ZlcmxheSBhcyBMZWFmbGV0VmlkZW9PdmVybGF5IH0gZnJvbSAnbGVhZmxldCc7XG5leHBvcnQgY29uc3QgVmlkZW9PdmVybGF5ID0gY3JlYXRlTGF5ZXJDb21wb25lbnQoZnVuY3Rpb24gY3JlYXRlVmlkZW9PdmVybGF5KHsgYm91bmRzICwgdXJsICwgLi4ub3B0aW9ucyB9LCBjdHgpIHtcbiAgICBjb25zdCBvdmVybGF5ID0gbmV3IExlYWZsZXRWaWRlb092ZXJsYXkodXJsLCBib3VuZHMsIG9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zLnBsYXkgPT09IHRydWUpIHtcbiAgICAgICAgb3ZlcmxheS5nZXRFbGVtZW50KCk/LnBsYXkoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRPYmplY3Qob3ZlcmxheSwgZXh0ZW5kQ29udGV4dChjdHgsIHtcbiAgICAgICAgb3ZlcmxheUNvbnRhaW5lcjogb3ZlcmxheVxuICAgIH0pKTtcbn0sIGZ1bmN0aW9uIHVwZGF0ZVZpZGVvT3ZlcmxheShvdmVybGF5LCBwcm9wcywgcHJldlByb3BzKSB7XG4gICAgdXBkYXRlTWVkaWFPdmVybGF5KG92ZXJsYXksIHByb3BzLCBwcmV2UHJvcHMpO1xuICAgIGlmICh0eXBlb2YgcHJvcHMudXJsID09PSAnc3RyaW5nJyAmJiBwcm9wcy51cmwgIT09IHByZXZQcm9wcy51cmwpIHtcbiAgICAgICAgb3ZlcmxheS5zZXRVcmwocHJvcHMudXJsKTtcbiAgICB9XG4gICAgY29uc3QgdmlkZW8gPSBvdmVybGF5LmdldEVsZW1lbnQoKTtcbiAgICBpZiAodmlkZW8gIT0gbnVsbCkge1xuICAgICAgICBpZiAocHJvcHMucGxheSA9PT0gdHJ1ZSAmJiAhcHJldlByb3BzLnBsYXkpIHtcbiAgICAgICAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICAgICAgfSBlbHNlIGlmICghcHJvcHMucGxheSAmJiBwcmV2UHJvcHMucGxheSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudE9iamVjdCwgY3JlYXRlVGlsZUxheWVyQ29tcG9uZW50LCB1cGRhdGVHcmlkTGF5ZXIsIHdpdGhQYW5lIH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBUaWxlTGF5ZXIgfSBmcm9tICdsZWFmbGV0JztcbmV4cG9ydCBjb25zdCBXTVNUaWxlTGF5ZXIgPSBjcmVhdGVUaWxlTGF5ZXJDb21wb25lbnQoZnVuY3Rpb24gY3JlYXRlV01TVGlsZUxheWVyKHsgZXZlbnRIYW5kbGVyczogX2VoICwgcGFyYW1zID17fSAsIHVybCAsIC4uLm9wdGlvbnMgfSwgY29udGV4dCkge1xuICAgIGNvbnN0IGxheWVyID0gbmV3IFRpbGVMYXllci5XTVModXJsLCB7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgLi4ud2l0aFBhbmUob3B0aW9ucywgY29udGV4dClcbiAgICB9KTtcbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudE9iamVjdChsYXllciwgY29udGV4dCk7XG59LCBmdW5jdGlvbiB1cGRhdGVXTVNUaWxlTGF5ZXIobGF5ZXIsIHByb3BzLCBwcmV2UHJvcHMpIHtcbiAgICB1cGRhdGVHcmlkTGF5ZXIobGF5ZXIsIHByb3BzLCBwcmV2UHJvcHMpO1xuICAgIGlmIChwcm9wcy5wYXJhbXMgIT0gbnVsbCAmJiBwcm9wcy5wYXJhbXMgIT09IHByZXZQcm9wcy5wYXJhbXMpIHtcbiAgICAgICAgbGF5ZXIuc2V0UGFyYW1zKHByb3BzLnBhcmFtcyk7XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250cm9sQ29tcG9uZW50IH0gZnJvbSAnQHJlYWN0LWxlYWZsZXQvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sIH0gZnJvbSAnbGVhZmxldCc7XG5leHBvcnQgY29uc3QgWm9vbUNvbnRyb2wgPSBjcmVhdGVDb250cm9sQ29tcG9uZW50KGZ1bmN0aW9uIGNyZWF0ZVpvb21Db250cm9sKHByb3BzKSB7XG4gICAgcmV0dXJuIG5ldyBDb250cm9sLlpvb20ocHJvcHMpO1xufSk7XG4iXSwibmFtZXMiOlsiZXh0ZW5kQ29udGV4dCIsInNvdXJjZSIsImV4dHJhIiwiT2JqZWN0IiwiZnJlZXplIiwiTGVhZmxldENvbnRleHQiLCJjcmVhdGVDb250ZXh0IiwiTGVhZmxldFByb3ZpZGVyIiwiUHJvdmlkZXIiLCJ1c2VMZWFmbGV0Q29udGV4dCIsImNvbnRleHQiLCJ1c2VDb250ZXh0IiwiRXJyb3IiLCJ1c2VNYXAiLCJtYXAiLCJ1c2VNYXBFdmVudCIsInR5cGUiLCJoYW5kbGVyIiwidXNlRWZmZWN0Iiwib24iLCJvZmYiLCJ1c2VNYXBFdmVudHMiLCJoYW5kbGVycyIsImNyZWF0ZUNvbnRhaW5lckNvbXBvbmVudCIsInVzZUVsZW1lbnQiLCJDb250YWluZXJDb21wb25lbnQiLCJwcm9wcyIsImZvcndhcmRlZFJlZiIsImluc3RhbmNlIiwiY3VycmVudCIsInVzZUltcGVyYXRpdmVIYW5kbGUiLCJjaGlsZHJlbiIsInZhbHVlIiwiZm9yd2FyZFJlZiIsImNyZWF0ZUxlYWZDb21wb25lbnQiLCJMZWFmQ29tcG9uZW50IiwiY3JlYXRlQ29udHJvbEhvb2siLCJlbGVtZW50UmVmIiwicG9zaXRpb25SZWYiLCJ1c2VSZWYiLCJwb3NpdGlvbiIsImFkZFRvIiwicmVtb3ZlIiwic2V0UG9zaXRpb24iLCJjcmVhdGVFbGVtZW50T2JqZWN0IiwiY29udGFpbmVyIiwiY3JlYXRlRWxlbWVudEhvb2siLCJjcmVhdGVFbGVtZW50IiwidXBkYXRlRWxlbWVudCIsInByb3BzUmVmIiwidXNlQXR0cmlidXRpb24iLCJhdHRyaWJ1dGlvbiIsImF0dHJpYnV0aW9uUmVmIiwiYXR0cmlidXRpb25Db250cm9sIiwicmVtb3ZlQXR0cmlidXRpb24iLCJhZGRBdHRyaWJ1dGlvbiIsInVzZUV2ZW50SGFuZGxlcnMiLCJlbGVtZW50IiwiZXZlbnRIYW5kbGVycyIsImV2ZW50SGFuZGxlcnNSZWYiLCJ3aXRoUGFuZSIsInBhbmUiLCJ1c2VMYXllckxpZmVjeWNsZSIsImxheWVyQ29udGFpbmVyIiwiYWRkTGF5ZXIiLCJyZW1vdmVMYXllciIsImNyZWF0ZUxheWVySG9vayIsImNyZWF0ZUNvbnRyb2xDb21wb25lbnQiLCJjcmVhdGVJbnN0YW5jZSIsImNyZWF0ZUxheWVyQ29tcG9uZW50IiwiY3JlYXRlT3ZlcmxheUNvbXBvbmVudCIsInVzZUxpZmVjeWNsZSIsInVzZU92ZXJsYXkiLCJzZXRPcGVuIiwiY3JlYXRlRGl2T3ZlcmxheUhvb2siLCJPdmVybGF5Q29tcG9uZW50IiwiaXNPcGVuIiwidXNlU3RhdGUiLCJ1cGRhdGUiLCJjb250ZW50Tm9kZSIsIl9jb250ZW50Tm9kZSIsImNyZWF0ZVBvcnRhbCIsImNyZWF0ZURpdk92ZXJsYXlDb21wb25lbnQiLCJjcmVhdGVQYXRoQ29tcG9uZW50Iiwib3B0aW9uc1JlZiIsInBhdGhPcHRpb25zIiwib3B0aW9ucyIsInNldFN0eWxlIiwidXNlUGF0aE9wdGlvbnMiLCJjcmVhdGVUaWxlTGF5ZXJDb21wb25lbnQiLCJBdHRyaWJ1dGlvbkNvbnRyb2wiLCJDb250cm9sIiwiQXR0cmlidXRpb24iLCJ1cGRhdGVDaXJjbGUiLCJsYXllciIsInByZXZQcm9wcyIsImNlbnRlciIsInNldExhdExuZyIsInJhZGl1cyIsInNldFJhZGl1cyIsIkNpcmNsZSIsIl9jIiwiY3R4IiwiY2lyY2xlIiwib3ZlcmxheUNvbnRhaW5lciIsIkNpcmNsZU1hcmtlciIsIm1hcmtlciIsIkZlYXR1cmVHcm91cCIsImdyb3VwIiwiR2VvSlNPTiIsImRhdGEiLCJnZW9KU09OIiwic3R5bGUiLCJyZXNldFN0eWxlIiwidXBkYXRlTWVkaWFPdmVybGF5Iiwib3ZlcmxheSIsImJvdW5kcyIsIkxhdExuZ0JvdW5kcyIsInNldEJvdW5kcyIsIm9wYWNpdHkiLCJzZXRPcGFjaXR5IiwiekluZGV4Iiwic2V0WkluZGV4IiwiSW1hZ2VPdmVybGF5IiwidXJsIiwic2V0VXJsIiwiTGF5ZXJHcm91cCIsIkxheWVyc0NvbnRyb2wiLCJjb250cm9sIiwiTGF5ZXJzIiwidW5kZWZpbmVkIiwibGF5ZXJzQ29udHJvbCIsImNvbGxhcHNlZCIsImNvbGxhcHNlIiwiZXhwYW5kIiwiY3JlYXRlQ29udHJvbGxlZExheWVyIiwiYWRkTGF5ZXJUb0NvbnRyb2wiLCJwYXJlbnRDb250ZXh0Iiwic2V0TGF5ZXIiLCJ1c2VDYWxsYmFjayIsImxheWVyVG9BZGQiLCJjaGVja2VkIiwibmFtZSIsImxheWVyVG9SZW1vdmUiLCJ1c2VNZW1vIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwiTWFwQ29udGFpbmVyQ29tcG9uZW50IiwiYm91bmRzT3B0aW9ucyIsImNsYXNzTmFtZSIsImlkIiwicGxhY2Vob2xkZXIiLCJ3aGVuUmVhZHkiLCJ6b29tIiwic2V0Q29udGV4dCIsIm1hcFJlZiIsIm5vZGUiLCJzZXRWaWV3IiwiZml0Qm91bmRzIiwiX192ZXJzaW9uIiwiY3JlYXRlTGVhZmxldENvbnRleHQiLCJjb250ZW50cyIsInJlZiIsIkJhc2VMYXllciIsImFkZEJhc2VMYXllciIsIk92ZXJsYXkiLCJhZGRPdmVybGF5IiwiTWFwQ29udGFpbmVyIiwiTWFya2VyIiwiaWNvbiIsInNldEljb24iLCJ6SW5kZXhPZmZzZXQiLCJzZXRaSW5kZXhPZmZzZXQiLCJkcmFnZ2luZyIsImRyYWdnYWJsZSIsImVuYWJsZSIsImRpc2FibGUiLCJhZGRDbGFzc05hbWUiLCJzcGxpdCIsImZpbHRlciIsIkJvb2xlYW4iLCJzcGxpdENsYXNzTmFtZSIsImZvckVhY2giLCJjbHMiLCJEb21VdGlsIiwiYWRkQ2xhc3MiLCJERUZBVUxUX1BBTkVTIiwib21pdFBhbmUiLCJvYmoiLCJfcCIsIm90aGVycyIsIlBhbmVDb21wb25lbnQiLCJwYW5lTmFtZSIsInBhbmVFbGVtZW50Iiwic2V0UGFuZUVsZW1lbnQiLCJuZXdDb250ZXh0IiwiaW5kZXhPZiIsImdldFBhbmUiLCJwYXJlbnRQYW5lTmFtZSIsInBhcmVudFBhbmUiLCJjcmVhdGVQYW5lIiwia2V5cyIsIl9wYW5lcyIsIl9wYW5lUmVuZGVyZXJzIiwiUGFuZSIsIlBvbHlnb24iLCJwb3NpdGlvbnMiLCJwb2x5Z29uIiwic2V0TGF0TG5ncyIsIlBvbHlsaW5lIiwicG9seWxpbmUiLCJQb3B1cCIsIm9uUG9wdXBPcGVuIiwiZXZlbnQiLCJwb3B1cCIsIm9uUG9wdXBDbG9zZSIsInBvcHVwb3BlbiIsInBvcHVwY2xvc2UiLCJvcGVuT24iLCJiaW5kUG9wdXAiLCJ1bmJpbmRQb3B1cCIsIlJlY3RhbmdsZSIsInJlY3RhbmdsZSIsIlNjYWxlQ29udHJvbCIsIlNjYWxlIiwidXNlU1ZHT3ZlcmxheSIsImF0dHJpYnV0ZXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsInNldEF0dHJpYnV0ZSIsIlNWR092ZXJsYXlDb21wb25lbnQiLCJTVkdPdmVybGF5IiwidXBkYXRlR3JpZExheWVyIiwiVGlsZUxheWVyIiwiVG9vbHRpcCIsIm9uVG9vbHRpcE9wZW4iLCJ0b29sdGlwIiwib25Ub29sdGlwQ2xvc2UiLCJ0b29sdGlwb3BlbiIsInRvb2x0aXBjbG9zZSIsImJpbmRUb29sdGlwIiwiX21hcCIsInVuYmluZFRvb2x0aXAiLCJWaWRlb092ZXJsYXkiLCJwbGF5IiwiZ2V0RWxlbWVudCIsInZpZGVvIiwicGF1c2UiLCJXTVNUaWxlTGF5ZXIiLCJfZWgiLCJwYXJhbXMiLCJXTVMiLCJzZXRQYXJhbXMiLCJab29tQ29udHJvbCIsIlpvb20iXSwic291cmNlUm9vdCI6IiJ9